{% extends 'base/base.html' %}

{% block title %} Información {% endblock %}

{% block content %}
{% load scripts_validacion %}
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <div class="alert alert-success">
    {{ message }}
  </div>
    {% endfor %}
</ul>
{% endif %}


<h1>Sujeto # : {{ object.sujeto_numero|stringformat:"04d" }}</h1>


<ul class="nav nav-tabs">
  <li class="nav-item active">
    <a class="nav-link active" data-toggle="tab" href="#demografico">Demografico</a>
  </li>
  {% if object.estado > 0 and object.D_neuro_logico_psiquiatrico_previo.all|length == 0 %}
  {% if object.ce1 == False  and object.ce2 == False and object.ce3 == False and object.ce4 == False and object.ci3 == True and object.ci4 == True %}
    <li class="nav-item">
      <a class="nav-link "  data-toggle="tab" href="#clinica">Información Clínica</a>
    </li>
    {% if perms.paciente.can_ver_seguimiento %}
    {% if object.uci and object.uci.glasgowtotal != '0' %}
      <li class="nav-item">
        <a class="nav-link "  data-toggle="tab" href="#seguimientos">Seguimientos UCI</a>
      </li>
    {% endif %}
    {% endif %}
    {% if perms.validacion.can_ver_parametrosimg  and object.parametrosmotioncorrect %}
      <li class="nav-item">
        <a class="nav-link "  data-toggle="tab" href="#resultados">Resultados Estudio Imagen</a>
      </li>
    {% endif %}
  {% endif %}
  {% endif %}
</ul>
<div id="General" class="tab-content">
  <div class="tab-pane active"  id="demografico">


      <table class="table table-hover">

          <tbody>
            <tr class="table-active">
              <th>Fecha Registro</th>
              <td>{{ object.fecha_de_registro }} </td>
              <th>HC del sujeto</th>
              <td>{{ object.HC }} </td>
            </tr>
            {% if user.groups.all.0.name == 'Coordinador' %}
            <tr class="table-active">
              <th>Nombres</th>
              <td>{{ object.nombres }} </td>
              <th>Apellidos</th>
              <td>{{ object.apellidos }} </td>
            </tr>
            <tr class="table-active">
              <th>C.C</th>
              <td colspan="3">{{ object.cc }} </td>
            </tr>
            {% endif %}
            <tr class="table-active">
              <th>Edad Actual</th>
              <td>{{ object.edad }} Años</td>
              <th>Sexo</th>
              <td>{{ object.sexo }} </td>
            </tr>
            <tr>
              <th>Cama UCI</th>
              <td colspan="3">{{ object.cama_numero }} </td>
            </tr>
            <tr class="table-primary">
              <th>Fecha de Evento Principal </th>
              <td>{{ object.fecha_evento_principal }}</td>
              <th>Hora</th>
              {% if object.hora_evento_principal == None %}
              <td>Desconocida</td>
              {% else %}
              <td>{{ object.hora_evento_principal }}</td>
              {% endif %}

            </tr>
            <tr class="table-secondary">
              {% load scripts %}
              <th>Ingreso UCI</th>
              <td>{{ object.fecha_hora_ingreso }}</td>
              {% tiempo object as t%}
              {% if t < 48  %}
              <th>Tiempo desde ingreso</th>
              <td>{% tiempo object %} Horas</td>
              {% endif %}



            </tr>
            <tr class="table-success">
              <th>Grupo Diagnóstico</th>
              <td colspan="3">{{ object.G_diagnostico }}</td>
            </tr>

            <tr class="table-success">
              <th>Antecedentes neurologicos o <br>neuropsiquiátricos </th>
              <td colspan="3">{% for diag in  object.D_neuro_logico_psiquiatrico_previo.all %}
                    <p>{{ diag }}</p>
                  {% endfor %}
              </td>
            </tr>
            {% if object.D_especificos != "" %}
            <tr class="table-danger">
              <th>Diagnóstico Específico</th>
              <td colspan="3">{{ object.D_especificos }}</td>
            </tr>
            {% endif %}
            {% if object.estado != 0 %}
            <tr class="table-warning">
              <th >Criterios de inclusión</th>
              <td colspan="3">
                   {% if object.ci != None %}
                    <p>{{object.ci}}</p>
                   {% endif %}
                   {% if object.ci3 == True %}
                    <p>Puntaje en escala Glasgow igual o menor a 8 después del evento inicial.</p>
                   {% endif %}
                   {% if object.ci4 == True %}
                    <p>Paciente transportable a un resonador.</p>
                   {% endif %}
              </td>
            </tr>
            {% endif %}
            {% if object.inscrito == False and  object.estado != 0 %}
                <tr class="table-warning">
                  <th >Criterios de exclusión</th>
                  <td colspan="3">

                       {% if object.ce1 == True %}
                        <p>Diagnóstico de muerte cerebral en las primeras 48 horas del ingreso a UCI.</p>
                       {% endif %}
                       {% if object.ce2 == True %}
                        <p>Destruccion masiva del parénquima cerebral no rescatable por neurocirugía.</p>
                       {% endif %}
                       {% if object.ce3 == True %}
                        <p>Disfunción neurológica y/o neuropsiquiátrica previa.</p>
                       {% endif %}
                       {% if object.ce4 == True %}
                        <p>Decisión de la familia de no participar en estudios de investigación.</p>
                       {% endif %}
                  </td>
                </tr>
            {% endif %}
            <tr class="table-info">
              <th>Médico Responsable</th>
              <td>{{ object.medico_responsable }}</td>
              {% if object.estado != 0%}
              <th>Incluido en el estudio</th>
              <td>{% if object.inscrito == True %} Sí {% else %} No {% endif %}</td>
              {% endif %}
            </tr>
          </tbody>
        </table>

      {% if perms.paciente.change_candidato and object.estado == 0 %}
      {% if t >= 48  %}
    <form>
      <button class="btn btn-primary" formaction="{% url 'paciente_editar' object.pk%}">Establecer Criterios</button>
    </form>

      {% endif %}


      {% endif %}

 </div>
  <div class="tab-pane"  id="resultados">

  <br>
  <h3>Seleccione una Pestaña</h3>


  <ul class="nav nav-tabs">
    <li class="nav-item active">
      <a class="nav-link active" data-toggle="tab" href="#imagenes">Imagenes Encontradas</a>
    </li>
    <li class="nav-item">
      <a class="nav-link active show" data-toggle="tab" href="#movimiento">Movimiento</a>
    </li>
    {% if perms.validacion.can_ver_alineacion %}
    <li class="nav-item">
      <a class="nav-link active show" data-toggle="tab" href="#registro">Alineación</a>
    </li>
    {% endif %}
    {% if perms.validacion.can_ver_snr %}
    <li class="nav-item">
      <a class="nav-link active show" data-toggle="tab" href="#snr">Balance Señal Ruido</a>
    </li>
    {% endif %}


  </ul>
<div id="v" class="tab-content">
  <div class="tab-pane active" id="imagenes">
    <br>

  <legend>Imágenes Obtenidos de los Archivos</legend>

    <br>
    <form>
          <button class="btn btn-primary" formaction="{% url 'filtro_listar' %}">Editar o crear filtro para parámetros</button>
      </form>
    <br>



  {% get_images_names_sujeto object.sujeto_numero as imagenes %}



      {% for imagen in imagenes %}

      {% if imagen.2 == True %}
      {% get_campos_from_image_sujeto object.sujeto_numero imagen.0 as campos %}

        <div class="panel-group">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                <a data-toggle="collapse" href="#tipoimg{{ forloop.counter0 }}">{{imagen.0}}  {% if imagen.1 != "" %} ó {{imagen.1}} {%endif%}</a>
              </h4>
            </div>
            <div id="tipoimg{{ forloop.counter0 }}" class="panel-collapse collapse">
              <table class="table table-hover">
                <thead>
                <tr>
                  <th>Ref. Dicom</th>
                  <th>Nombre</th>
                  <th>Valor</th>
                  <th>Valor Esperado</th>
                  <th>Tolerancia</th>
                  <th>Validación</th>
                </tr>
                </thead>
                <tbody>
                {% for campo in campos %}
                <tr>
                  <td>{{campo.tag.num_tag}}</td>
                  <td>{{campo.tag.name_tag}}</td>
                  <td>{{campo.valor}} {{campo.medidas}}</td>
                  <td>{{campo.v_esperado}} {{campo.medidas}}</td>
                  <td>{{campo.precision}}%</td>
                  <td>{% if campo.cumple == True %} <span style="color:green" class="glyphicon glyphicon-check"></span> {% endif %}</td>
                </tr>

                {% endfor %}
                </tbody>
              </table>
              Nota : Spacing Between Slices medido entre el punto medio de cada corte.
              <form>
                <button class="btn btn-primary" formaction="{% url 'vision_img' imagen.3 %}">Ocultar</button>
              </form>
            </div>
          </div>
        </div>
      {% else %}
      <ul>
        <form>
        {{imagen.0}} * {% if imagen.1 != "" %} ó {{imagen.1}} {%endif%} &nbsp; &nbsp; <button class="btn btn-primary" formaction="{% url 'vision_img' imagen.3 %}">Mostrar</button>
          </form>
      </ul>

      {% endif %}
      <br>
      <br>
      {% endfor %}


      *Imágenes encontradas distintas al protocolo de adquisición.

  </div>
  <div class="tab-pane " id="movimiento">

     <div class="panel-group" id="accordion">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion" href="#funcional">
            Funcional (Resting)</a>
          </h4>
        </div>
        <div id="funcional" class="panel-collapse collapse in">
          <div class="panel-body">
            <h4>Movimiento Medio</h4>
            <table class="table table-hover">
              <tbody>
              <tr>
                <th>Absoluto</th>
                <td>{{ object.parametrosmotioncorrect.absolute_func }} mm </td>
                <th>Relativo</th>
                <td>{{ object.parametrosmotioncorrect.relative_func }} mm</td>
              </tr>
              </tbody>
            </table>
            <center>
            <div id="div_func_desplazamiento"><!-- Plotly chart will be drawn inside this DIV --></div>
            <div id="div_func_rotaciones"><!-- Plotly chart will be drawn inside this DIV --></div>
            <div id="div_func_traslaciones"><!-- Plotly chart will be drawn inside this DIV --></div>
            </center>

            <h3>Resultados de movimiento aceptables?  </h3>
          {% if object.parametrosmotioncorrect.aceptado_func == None and perms.paciente.change_parametrosmotioncorrect %}

            <form>
            <label class="radio-inline">
              <input type="radio" name="optradio" id="func_si">Si
            </label>
            <label class="radio-inline">
              <input type="radio" name="optradio" id="func_no">No
            </label>
          </form>
            {% else %}
            {% if  object.parametrosmotioncorrect.aceptado_func == True %}
              <span style="color:green" class="glyphicon glyphicon-check" ></span>
              {% elif object.parametrosmotioncorrect.aceptado_func == False %}
              <span style="color:red" class="glyphicon glyphicon-remove-circle"></span>
              {%else%}
              No Determinado
            {% endif %}
            {% endif %}


          </div>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion" href="#dwi">
            Dwi (Tensor)</a>
          </h4>
        </div>
        <div id="dwi" class="panel-collapse collapse in">
          <div class="panel-body">
            <h4>Movimiento Medio</h4>
            <table class="table table-hover">
              <tbody>
              <tr>
                <th>Absoluto</th>
                <td>{{ object.parametrosmotioncorrect.absolute_dwi }} mm </td>
                <th>Relativo</th>
                <td>{{ object.parametrosmotioncorrect.relative_dwi }} mm</td>
              </tr>
              </tbody>
            </table>
            <center>
            <div id="div_dwi_desplazamiento"><!-- Plotly chart will be drawn inside this DIV --></div>
            <div id="div_dwi_rotaciones"><!-- Plotly chart will be drawn inside this DIV --></div>
            <div id="div_dwi_traslaciones"><!-- Plotly chart will be drawn inside this DIV --></div>
            </center>
            <h3>Resultados de movimiento aceptables?  </h3>
            {% if object.parametrosmotioncorrect.aceptado_dwi == None and perms.paciente.change_parametrosmotioncorrect %}

            <form>
            <label class="radio-inline">
              <input type="radio" name="optradio" id="dwi_si">Si
            </label>
            <label class="radio-inline">
              <input type="radio" name="optradio" id="dwi_no">No
            </label>


              <a class="btn btn-primary" onclick="mov()" >Enviar</a>
              <script >
              function mov() {

                  var fs=document.getElementById("func_si").checked;
                  var ds=document.getElementById("dwi_si").checked;
                  var v1=0
                  var v2=0
                  if ( fs == true ){
                    v1=1
                  }
                  else {
                    v1=0
                  }
                  if ( ds == true ){
                    v2=1
                  }
                  else {
                    v2=0
                  }
                  var url_mask = "{% url 'v_movimiento' 'sujeto' object.sujeto_numero 'x' 'y' %}".replace('x', v1.toString());
                  url_mask=url_mask.replace('y', v2.toString());
                  window.location=url_mask;

              }
              </script>
            {% else %}
            {% if  object.parametrosmotioncorrect.aceptado_dwi == True %}
              <span style="color:green" class="glyphicon glyphicon-check" ></span>
              {% elif  object.parametrosmotioncorrect.aceptado_dwi == False %}
              <span style="color:red" class="glyphicon glyphicon-remove-circle"></span>
              {% else %}
              No Determinado
            {% endif %}

            {% endif %}


          </form>


          </div>
        </div>
        </div>
      </div>
    </div>

  <div class="tab-pane " id="registro">
<br>
<br>
<div class="container">
<ul class="nav nav-pills nav-stacked col-md-2">
  <li class="active"><a href="#tab_a" data-toggle="pill">Imagen Estructural</a></li>
  <li><a href="#tab_b" data-toggle="pill">Imagen Funcional</a></li>
  <li><a href="#tab_c" data-toggle="pill">Imagen de Difusión</a></li>
</ul>
<div class="tab-content col-md-10">
        <div class="tab-pane active" id="tab_a">
             <center>
      <h3>Vista Previa Imagen Estructural</h3>
    <iframe src="{{object.get_realineacion.structural.url}}" width="700" height="290" name="realineacion" frameborder="0" id="framestruct">


    </iframe>


    {% if object.get_realineacion.structural_cambio == False and perms.validacion.change_realineacion %}
      <table cellspacing="50" width="400" id="movimientos" >
        <caption>Movimientos</caption>

        <tbody>
        <tr>
          <th colspan="4">Traslaciones</th>
        </tr>
        <tr>
          <td>Derecha (eje y)</td>
          <td><button onclick="restar('der')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="der" value="0" maxlength="10" min="-100" max="100" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar('der')"></td>
          <td><button onclick="sumar('der')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Frente (eje x)</td>

          <td><button onclick="restar('frente')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="frente" value="0" maxlength="10" min="-100" max="100" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar('frente')"></td>
          <td><button onclick="sumar('frente')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Arriba (eje z)</td>

          <td><button onclick="restar('arriba')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="arriba" value="0" maxlength="10" min="-100" max="100" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar('arriba')"></td>
          <td><button onclick="sumar('arriba')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>

        <tr>
          <th colspan="4">Escalamiento</th>
        </tr>
        <tr>
          <td>Eje x</td>
          <td><button onclick="restar('ex')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="ex" value="1" maxlength="10" min="0.1" max="2" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar('ex')"></td>
          <td><button onclick="sumar('ex')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Eje y</td>

          <td><button onclick="restar('ey')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="ey" value="1" maxlength="10" min="0.1" max="2" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar('ey')"></td>
          <td><button onclick="sumar('ey')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Eje z</td>

          <td><button onclick="restar('ez')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="ez" value="1" maxlength="10" min="0.1" max="2" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar('ez')"></td>
          <td><button onclick="sumar('ez')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>

        <tr>
          <th colspan="4">Rotaciones</th>
        </tr>
        <tr>
          <td>Eje x</td>
          <td><button onclick="restar('rx')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="rx" value="0" maxlength="10" min="-3.1416" max="3.1416" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar('rx')"></td>
          <td><button onclick="sumar('rx')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Eje y</td>

          <td><button onclick="restar('ry')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="ry" value="0" maxlength="10" min="-3.1416" max="3.1416" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar('ry')"></td>
          <td><button onclick="sumar('ry')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Eje z</td>

          <td><button onclick="restar('rz')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="rz" value="0" maxlength="10" min="-3.1416" max="3.1416" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar('rz')"></td>
          <td><button onclick="sumar('rz')" ><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>

        </tbody>
      </table>
      <br>
      <br>
      <form>
      <button id="reinicio" class="btn btn-primary" formaction="{% url 'alinear' 'sujeto' object.pk 'structural' '0' '0' '0' '1' '1' '1' '0' '0' '0' '0' %}" formtarget="realineacion" onclick="reiniciar()"> Reiniciar</button>
      <button id="guardar" class="btn btn-primary" formaction="#" onclick="accion('1')">Guardar</button>
      </form>
      {% endif %}
             </center>

    <script>
      function accion(save) {

          var der=document.getElementById("der").value;
          der=der.replace(".", "_").substring(0, 5);
          var frente=document.getElementById("frente").value;
          frente=frente.replace(".", "_").substring(0, 5);
          var arriba=document.getElementById("arriba").value;
          arriba=arriba.replace(".", "_").substring(0, 5);
          var ex=document.getElementById("ex").value;
          ex=ex.replace(".", "_").substring(0, 5);
          var ey=document.getElementById("ey").value;
          ey=ey.replace(".", "_").substring(0, 5);
          var ez=document.getElementById("ez").value;
          ez=ez.replace(".", "_").substring(0, 5);
          var tx=document.getElementById("rx").value;
          tx=tx.replace(".", "_").substring(0, 5);
          var ty=document.getElementById("ry").value;
          ty=ty.replace(".", "_").substring(0, 5);
          var tz=document.getElementById("rz").value;
          tz=tz.replace(".", "_").substring(0, 5);


          if ( save == '1'){
              document.getElementById('movimientos').style="display:none";
              document.getElementById('reinicio').style="display:none";
              document.getElementById('guardar').style="display:none";
          }

          url_mask="{% url 'alinear' 'sujeto' object.pk 'structural' 'der' 'frente' 'arriba' 'ex' 'ey' 'ez' 'tx' 'ty' 'tz' 'save' %}";
          window.frames["realineacion"].location = url_mask.replace('der',der).replace('frente',frente).replace('arriba',arriba).replace('ex',ex).replace('ey',ey).replace('ez',ez).replace('tx',tx).replace('ty',ty).replace('tz',tz).replace('save',save);
      }

      function reiniciar() {
          document.getElementById("der").value=0;
          document.getElementById("frente").value = 0;
          document.getElementById("arriba").value = 0;
          document.getElementById("ex").value=1;
          document.getElementById("ey").value=1;
          document.getElementById("ez").value=1;
          document.getElementById("rx").value=0;
          document.getElementById("ry").value=0;
          document.getElementById("rz").value=0;
      }


      function validar(a) {
          var x = document.getElementById(a).value;
          if ( x == ''){
              document.getElementById(a).value=0;
          }
          x=parseFloat(x);
          var max = document.getElementById(a).max;
          var min = document.getElementById(a).min;
          if ( x < min || x > max ){
              document.getElementById(a).value=0;
          }
          accion('0');
      }

      function sumar(a) {
          var x = document.getElementById(a);
          document.getElementById(a).value=parseFloat(x.value)+parseFloat(0.1);
          validar(a);
          accion('0');

      }

      function restar(a) {
          var x = document.getElementById(a);
          document.getElementById(a).value=parseFloat(x.value)-parseFloat(0.1);
          validar(a);
          accion('0');
      }
    </script>
        </div>
        <div class="tab-pane" id="tab_b">
             <center>
      <h3>Vista Previa Imagen Funcional</h3>
    <iframe src="{{object.get_realineacion.funcional.url}}" width="700" height="290" name="realineacion_func" frameborder="0" id="framefunc">


    </iframe>


    {% if object.get_realineacion.funcional_cambio == False and perms.validacion.change_realineacion %}
      <table cellspacing="50" width="400" id="movimientos_func" >
        <caption>Movimientos</caption>

        <tbody>
        <tr>
          <th colspan="4">Traslaciones</th>
        </tr>
        <tr>
          <td>Derecha (eje y)</td>
          <td><button onclick="restar_func('der_func')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="der_func" value="0" maxlength="10" min="-100" max="100" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_func('der_func')"></td>
          <td><button onclick="sumar_func('der_func')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Frente (eje x)</td>

          <td><button onclick="restar_func('frente_func')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="frente_func" value="0" maxlength="10" min="-100" max="100" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_func('frente_func')"></td>
          <td><button onclick="sumar_func('frente_func')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Arriba (eje z)</td>

          <td><button onclick="restar_func('arriba_func')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="arriba_func" value="0" maxlength="10" min="-100" max="100" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_func('arriba_func')"></td>
          <td><button onclick="sumar_func('arriba_func')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>

        <tr>
          <th colspan="4">Escalamiento</th>
        </tr>
        <tr>
          <td>Eje x</td>
          <td><button onclick="restar_func('ex_func')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="ex_func" value="1" maxlength="10" min="0.1" max="2" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_func('ex_func')"></td>
          <td><button onclick="sumar_func('ex_func')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Eje y</td>

          <td><button onclick="restar_func('ey_func')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="ey_func" value="1" maxlength="10" min="0.1" max="2" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_func('ey_func')"></td>
          <td><button onclick="sumar_func('ey_func')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Eje z</td>

          <td><button onclick="restar_func('ez_func')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="ez_func" value="1" maxlength="10" min="0.1" max="2" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_func('ez_func')"></td>
          <td><button onclick="sumar_func('ez_func')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>

        <tr>
          <th colspan="4">Rotaciones</th>
        </tr>
        <tr>
          <td>Eje x</td>
          <td><button onclick="restar_func('rx_func')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="rx_func" value="0" maxlength="10" min="-3.1416" max="3.1416" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_func('rx_func')"></td>
          <td><button onclick="sumar_func('rx_func')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Eje y</td>

          <td><button onclick="restar_func('ry_func')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="ry_func" value="0" maxlength="10" min="-3.1416" max="3.1416" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_func('ry_func')"></td>
          <td><button onclick="sumar_func('ry_func')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Eje z</td>

          <td><button onclick="restar_func('rz_func')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="rz_func" value="0" maxlength="10" min="-3.1416" max="3.1416" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_func('rz_func')"></td>
          <td><button onclick="sumar_func('rz_func')" ><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>

        </tbody>
      </table>
      <br>
      <br>
      <form>
      <button id="reinicio_func" class="btn btn-primary" formaction="{% url 'alinear' 'sujeto' object.pk 'funcional' '0' '0' '0' '1' '1' '1' '0' '0' '0' '0' %}" formtarget="realineacion_func" onclick="reiniciar_func()">Reiniciar</button>
      <button id="guardar_func" class="btn btn-primary" formaction="#" onclick="accion_func('1')">Guardar</button>
      </form>
      {% endif %}
             </center>

    <script>
      function accion_func(save) {

          var der_func=document.getElementById("der_func").value;
          der_func=der_func.replace(".", "_").substring(0, 5);
          var frente_func=document.getElementById("frente_func").value;
          frente_func=frente_func.replace(".", "_").substring(0, 5);
          var arriba_func=document.getElementById("arriba_func").value;
          arriba_func=arriba_func.replace(".", "_").substring(0, 5);
          var ex_func=document.getElementById("ex_func").value;
          ex_func=ex_func.replace(".", "_").substring(0, 5);
          var ey_func=document.getElementById("ey_func").value;
          ey_func=ey_func.replace(".", "_").substring(0, 5);
          var ez_func=document.getElementById("ez_func").value;
          ez_func=ez_func.replace(".", "_").substring(0, 5);
          var tx=document.getElementById("rx_func").value;
          tx=tx.replace(".", "_").substring(0, 5);
          var ty=document.getElementById("ry_func").value;
          ty=ty.replace(".", "_").substring(0, 5);
          var tz=document.getElementById("rz_func").value;
          tz=tz.replace(".", "_").substring(0, 5);


          if ( save == '1'){
              document.getElementById('movimientos_func').style="display:none";
              document.getElementById('reinicio_func').style="display:none";
              document.getElementById('guardar_func').style="display:none";
          }

          url_mask="{% url 'alinear' 'sujeto' object.pk 'funcional' 'der_func' 'frente_func' 'arriba_func' 'ex_func' 'ey_func' 'ez_func' 'tx' 'ty' 'tz' 'save' %}";
          window.frames["realineacion_func"].location = url_mask.replace('der_func',der_func).replace('frente_func',frente_func).replace('arriba_func',arriba_func).replace('ex_func',ex_func).replace('ey_func',ey_func).replace('ez_func',ez_func).replace('tx',tx).replace('ty',ty).replace('tz',tz).replace('save',save);
      }

      function reiniciar_func() {
          document.getElementById("der_func").value=0;
          document.getElementById("frente_func").value = 0;
          document.getElementById("arriba_func").value = 0;
          document.getElementById("ex_func").value=1;
          document.getElementById("ey_func").value=1;
          document.getElementById("ez_func").value=1;
          document.getElementById("rx_func").value=0;
          document.getElementById("ry_func").value=0;
          document.getElementById("rz_func").value=0;
      }


      function validar_func(a) {
          var x = document.getElementById(a).value;
          if ( x == ''){
              document.getElementById(a).value=0;
          }
          x=parseFloat(x);
          var max = document.getElementById(a).max;
          var min = document.getElementById(a).min;
          if ( x < min || x > max ){
              document.getElementById(a).value=0;
          }
          accion_func('0');
      }

      function sumar_func(a) {
          var x = document.getElementById(a);
          document.getElementById(a).value=parseFloat(x.value)+parseFloat(0.1);
          validar_func(a);
          accion_func('0');

      }

      function restar_func(a) {
          var x = document.getElementById(a);
          document.getElementById(a).value=parseFloat(x.value)-parseFloat(0.1);
          validar_func(a);
          accion_func('0');
      }
    </script>
        </div>
        <div class="tab-pane" id="tab_c">
             <center>
      <h3>Vista Previa Imagen de Difusión</h3>
    <iframe src="{{object.get_realineacion.tensor.url}}" width="700" height="290" name="realineacion_tensor" frameborder="0" id="frametensor">


    </iframe>

   {% if object.parametrosimg %}
    <script>
      var date = new Date;
      document.getElementById("framestruct").src=document.getElementById("framestruct").src+"?"+date.getTime();
      document.getElementById("framefunc").src=document.getElementById("framefunc").src+"?"+date.getTime()+1;
      document.getElementById("frametensor").src=document.getElementById("frametensor").src+"?"+date.getTime()+2;

    </script>
    {% endif %}

    {% if object.get_realineacion.tensor_cambio == False and perms.validacion.change_realineacion %}
      <table cellspacing="50" width="400" id="movimientos_tensor" >
        <caption>Movimientos</caption>

        <tbody>
        <tr>
          <th colspan="4">Traslaciones</th>
        </tr>
        <tr>
          <td>Derecha (eje y)</td>
          <td><button onclick="restar_tensor('der_tensor')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="der_tensor" value="0" maxlength="10" min="-100" max="100" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_tensor('der_tensor')"></td>
          <td><button onclick="sumar_tensor('der_tensor')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Frente (eje x)</td>

          <td><button onclick="restar_tensor('frente_tensor')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="frente_tensor" value="0" maxlength="10" min="-100" max="100" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_tensor('frente_tensor')"></td>
          <td><button onclick="sumar_tensor('frente_tensor')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Arriba (eje z)</td>

          <td><button onclick="restar_tensor('arriba_tensor')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="arriba_tensor" value="0" maxlength="10" min="-100" max="100" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_tensor('arriba_tensor')"></td>
          <td><button onclick="sumar_tensor('arriba_tensor')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>

        <tr>
          <th colspan="4">Escalamiento</th>
        </tr>
        <tr>
          <td>Eje x</td>
          <td><button onclick="restar_tensor('ex_tensor')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="ex_tensor" value="1" maxlength="10" min="0.1" max="2" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_tensor('ex_tensor')"></td>
          <td><button onclick="sumar_tensor('ex_tensor')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Eje y</td>

          <td><button onclick="restar_tensor('ey_tensor')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="ey_tensor" value="1" maxlength="10" min="0.1" max="2" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_tensor('ey_tensor')"></td>
          <td><button onclick="sumar_tensor('ey_tensor')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Eje z</td>

          <td><button onclick="restar_tensor('ez_tensor')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="ez_tensor" value="1" maxlength="10" min="0.1" max="2" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_tensor('ez_tensor')"></td>
          <td><button onclick="sumar_tensor('ez_tensor')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>

        <tr>
          <th colspan="4">Rotaciones</th>
        </tr>
        <tr>
          <td>Eje x</td>
          <td><button onclick="restar_tensor('rx_tensor')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="rx_tensor" value="0" maxlength="10" min="-3.1416" max="3.1416" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_tensor('rx_tensor')"></td>
          <td><button onclick="sumar_tensor('rx_tensor')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Eje y</td>

          <td><button onclick="restar_tensor('ry_tensor')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="ry_tensor" value="0" maxlength="10" min="-3.1416" max="3.1416" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_tensor('ry_tensor')"></td>
          <td><button onclick="sumar_tensor('ry_tensor')"><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>
        <tr>
          <td>Eje z</td>

          <td><button onclick="restar_tensor('rz_tensor')"><span style="color:blue" class="glyphicon glyphicon-minus"></span></button></td>
          <td><input type="text" id="rz_tensor" value="0" maxlength="10" min="-3.1416" max="3.1416" required size="10" oninput="this.value = this.value.replace(/[^0-9&#46;&#45;]/, '')" onchange="validar_tensor('rz_tensor')"></td>
          <td><button onclick="sumar_tensor('rz_tensor')" ><span style="color:blue" class="glyphicon glyphicon-plus"></span></button></td>
        </tr>

        </tbody>
      </table>
      <br>
      <br>
      <form>
      <button id="reinicio_tensor" class="btn btn-primary" formaction="{% url 'alinear' 'sujeto' object.pk 'tensor' '0' '0' '0' '1' '1' '1' '0' '0' '0' '0' %}" formtarget="realineacion_tensor" onclick="reiniciar_tensor()">Reiniciar</button>
      <button id="guardar_tensor" class="btn btn-primary" formaction="#" onclick="accion_tensor('1')">Guardar</button>
      </form>
      {% endif %}
             </center>

    <script>
      function accion_tensor(save) {

          var der_tensor=document.getElementById("der_tensor").value;
          der_tensor=der_tensor.replace(".", "_").substring(0, 5);
          var frente_tensor=document.getElementById("frente_tensor").value;
          frente_tensor=frente_tensor.replace(".", "_").substring(0, 5);
          var arriba_tensor=document.getElementById("arriba_tensor").value;
          arriba_tensor=arriba_tensor.replace(".", "_").substring(0, 5);
          var ex_tensor=document.getElementById("ex_tensor").value;
          ex_tensor=ex_tensor.replace(".", "_").substring(0, 5);
          var ey_tensor=document.getElementById("ey_tensor").value;
          ey_tensor=ey_tensor.replace(".", "_").substring(0, 5);
          var ez_tensor=document.getElementById("ez_tensor").value;
          ez_tensor=ez_tensor.replace(".", "_").substring(0, 5);
          var tx=document.getElementById("rx_tensor").value;
          tx=tx.replace(".", "_").substring(0, 5);
          var ty=document.getElementById("ry_tensor").value;
          ty=ty.replace(".", "_").substring(0, 5);
          var tz=document.getElementById("rz_tensor").value;
          tz=tz.replace(".", "_").substring(0, 5);


          if ( save == '1'){
              document.getElementById('movimientos_tensor').style="display:none";
              document.getElementById('reinicio_tensor').style="display:none";
              document.getElementById('guardar_tensor').style="display:none";
          }

          url_mask="{% url 'alinear' 'sujeto' object.pk 'tensor' 'der_tensor' 'frente_tensor' 'arriba_tensor' 'ex_tensor' 'ey_tensor' 'ez_tensor' 'tx' 'ty' 'tz' 'save' %}";
          window.frames["realineacion_tensor"].location = url_mask.replace('der_tensor',der_tensor).replace('frente_tensor',frente_tensor).replace('arriba_tensor',arriba_tensor).replace('ex_tensor',ex_tensor).replace('ey_tensor',ey_tensor).replace('ez_tensor',ez_tensor).replace('tx',tx).replace('ty',ty).replace('tz',tz).replace('save',save);
      }

      function reiniciar_tensor() {
          document.getElementById("der_tensor").value=0;
          document.getElementById("frente_tensor").value = 0;
          document.getElementById("arriba_tensor").value = 0;
          document.getElementById("ex_tensor").value=1;
          document.getElementById("ey_tensor").value=1;
          document.getElementById("ez_tensor").value=1;
          document.getElementById("rx_tensor").value=0;
          document.getElementById("ry_tensor").value=0;
          document.getElementById("rz_tensor").value=0;
      }


      function validar_tensor(a) {
          var x = document.getElementById(a).value;
          if ( x == ''){
              document.getElementById(a).value=0;
          }
          x=parseFloat(x);
          var max = document.getElementById(a).max;
          var min = document.getElementById(a).min;
          if ( x < min || x > max ){
              document.getElementById(a).value=0;
          }
          accion_tensor('0');
      }

      function sumar_tensor(a) {
          var x = document.getElementById(a);
          document.getElementById(a).value=parseFloat(x.value)+parseFloat(0.1);
          validar_tensor(a);
          accion_tensor('0');

      }

      function restar_tensor(a) {
          var x = document.getElementById(a);
          document.getElementById(a).value=parseFloat(x.value)-parseFloat(0.1);
          validar_tensor(a);
          accion_tensor('0');
      }
    </script>
        </div>
</div><!-- tab content -->
</div><!-- end of container -->











  </div>

  <div class="tab-pane " id="snr">
    <br>
    <div class="alert alert-dismissible alert-success">
      <h4 class="alert-heading">Observación</h4>
      <p class="mb-3">El balance Señal-ruido mostrado a continuación se calculo para cada volumen
      de las imágenes estructural, funcional y de difusión, ya que no se conoce la verdadera
      señal para comparar el ruido generado en la adquisición el valor mostrado se compara con
      el hallado para la imagen template de una imagen de resonancia estructural, la cual tiene un valor de <math>1.03.</math> </p>
    </div>



     <ul>
        <li>Imagen Estructural (T1)</li>
          <ul>
            <li>snr: {{object.get_snr.structural}}</li>
          </ul>
        <li>Imagen Funcional (fMRI)</li>
          <ul>
            <li>snr: {{object.get_snr.funcional}}</li>
            <div id="div_snr_func"><!-- Plotly chart will be drawn inside this DIV --></div>
          </ul>
        <li>Imagen de Difusión (DWI)</li>
          <ul>
            <li>snr: {{object.get_snr.tensor}}</li>
            <div id="div_snr_dwi"><!-- Plotly chart will be drawn inside this DIV --></div>
            <li>El valor de 0 indica el snr para la b0.</li>
          </ul>
      </ul>



    </div>

</div>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="{{object.parametrosmotioncorrect.graphic_desplazamiento_func}}"></script>
  <script src="{{object.parametrosmotioncorrect.graphic_rotacion_func}}"></script>
  <script src="{{object.parametrosmotioncorrect.graphic_traslacion_func}}"></script>

  <script src="{{object.parametrosmotioncorrect.graphic_desplazamiento_dwi}}"></script>
  <script src="{{object.parametrosmotioncorrect.graphic_rotacion_dwi}}"></script>
  <script src="{{object.parametrosmotioncorrect.graphic_traslacion_dwi}}"></script>

  <script src="{{object.get_snr.funcional_plot}}"></script>
  <script src="{{object.get_snr.tensor_plot}}"></script>


 </div>
  <div class="tab-pane fade" id="clinica">
<br>
  <h3>Seleccione una Pestaña</h3>

    <ul class="nav nav-tabs">

      {% if object.estado > 0 and object.D_neuro_logico_psiquiatrico_previo.all|length == 0 %}
      {% if object.ce1 == False  and object.ce2 == False and object.ce3 == False and object.ce4 == False and object.ci3 == True and object.ci4 == True %}

      {% if perms.paciente.can_ver_ingreso %}
      <li class="nav-item" >
        <a class="nav-link "  data-toggle="tab" href="#estudio" {% if not object.ingreso or object.ingreso.fecha_form == None  %} style="color:orange" {% endif %} >Formato ingreso al estudio</a>
      </li>
      {% endif %}
      {% if perms.paciente.can_ver_uci %}
      <li class="nav-item">
        <a class="nav-link "  data-toggle="tab" href="#uci" {% if not object.uci or object.uci.fechauci == None  %} style="color:orange" {% endif %} >Formato UCI</a>
      </li>
      {% endif %}
      {% if perms.paciente.can_ver_neurologia %}
      <li class="nav-item">
        <a class="nav-link "  data-toggle="tab"   href="#neurologia" {% if object.get_neuro|length == 0 or object.get_neuro.0.fechaneuro == None %} style="color:orange" {% endif %} >Formato Neurología</a>
      </li>
      {% endif %}
      {% if perms.paciente.can_ver_radiologia %}
      <li class="nav-item">
        <a class="nav-link "  data-toggle="tab"   href="#radiologia" {% if not object.radiologia or object.radiologia.fecha_procedimiento == None  %} style="color:orange" {% endif %} >Traslado a Radiología</a>
      </li>
      {% endif %}
      {% if perms.paciente.can_ver_bold %}
      <li class="nav-item">
        <a class="nav-link "  data-toggle="tab"   href="#bold" {% if not object.bold or object.bold.fechaimg == None  %} style="color:orange" {% endif %}>Checklist BOLD</a>
      </li>
      {% endif %}
      {% if perms.paciente.can_ver_informante %}
      <li class="nav-item">
        <a class="nav-link "  data-toggle="tab"   href="#informante" {% if not object.informante or object.informante.fechaentrevista == None  %} style="color:orange" {% endif %}>Neuropsicología Informante</a>
      </li>
      {% endif %}
      {% if perms.paciente.can_ver_lectura %}
      <li class="nav-item">
        <a class="nav-link "  data-toggle="tab"   href="#lectura" {% if not object.lectura_resonancia  %} style="color:orange" {% endif %}>Lectura Resonancia</a>
      </li>
      {% endif %}

    {% if perms.fileupload.add_picture %}
        {% if object.ingreso and object.ingreso.fecha_form != None and not object.imagen and object.inscrito == True%}
      <li class="nav-item">
        <a class="nav-link "  data-toggle="tab"   href="#imagen" {% if not object.imagen %} style="color:orange" {% endif %} >Imagen</a>
      </li>
        {% endif %}
    {% endif %}

      {% if object.uci and object.uci.condicion_egreso == 'Vivo' and perms.paciente.can_ver_moca %}
      <li class="nav-item">
        <a class="nav-link "  data-toggle="tab"   href="#moca">Neuropsicología Sujeto</a>
      </li>
      {% endif %}


      {% endif %}
      {% endif %}
    </ul>
    <div id="myTabContent" class="tab-content" >

      <div class="tab-pane" id="estudio">
        <form>
        {% if not object.ingreso  or object.ingreso.fecha_form == None %}
          <p class="text-danger">No se encontro información de Ingreso del Sujeto</p>
          {% if perms.paciente.add_ingreso and object.inscrito == True %}
          {% if object.ingreso %}
          <button class="btn btn-primary" formaction="{% url 'ingreso_editar' object.ingreso.pk %}">Añadir</button>
          {% else %}
          <button class="btn btn-primary" formaction="{% url 'crear_ingreso' object.pk%}">Añadir</button>
          {% endif %}
          {% endif %}
        {% endif %}
        </form>




        {% if object.ingreso and object.ingreso.fecha_form != None  %}
        <table class="table table-hover">

              <tbody>
                <tr class="table-active">
                  <th>Fecha Ingreso</th>
                  <td colspan="3">{{ object.ingreso.fecha_form }} </td>
                </tr>
                <tr class="table-active">
                  <th>Lugar de Nacimiento</th>
                  <td>{{ object.ingreso.lugar_nacimiento }} </td>
                    <th>Lugar de Residencia</th>
                  <td>{{ object.ingreso.lugar_residencia }} </td>
                </tr>
                {% if user.groups.all.0.name == 'Coordinador' %}
                <tr class="table-active">
                  <th>Dirección</th>
                  <td>{{ object.ingreso.direccion }} </td>
                  <th>Acompañante</th>
                  <td>{{ object.ingreso.nombre_acompanante }} </td>
                </tr>
                <tr class="table-active">
                  <th>Teléfono de contacto 1</th>
                  <td>{{ object.ingreso.tel1 }} </td>
                  <th>Teléfono de contacto 2</th>
                  {% if object.ingreso.tel2 == None %}
                  <td>Desconocido</td>
                  {% else %}
                  <td>{{ object.ingreso.tel2 }}</td>
                  {% endif %}
                </tr>
                {% endif %}
                <tr class="table-active">
                  <th>Peso</th>
                  <td>{{ object.ingreso.peso }} Kg</td>
                  <th>Altura</th>
                  <td>{{ object.ingreso.estatura }} cms</td>
                </tr>
                <tr>
                  <th>Nivel educativo</th>
                  <td >{{ object.ingreso.n_educativo }} </td>
                  <th>Lateralidad</th>
                  <td >{{ object.ingreso.lateralidad }} </td>
                </tr>
                <tr class="table-primary">
                  <th>Estado de conciencia </th>
                  <td>{{ object.ingreso.conciencia }}</td>
                  <th>Sedado por neuroprotección</th>
                  <td>{% if object.ingreso.sedado == True %} Sí {% else %} No {% endif %}</td>
                </tr>

                <tr class="table-success">
                  <th>Antecedentes Patológicos</th>
                  <td >
                      {% if object.ingreso.a_patologicos.all|length != 0 %}
                      {% for p in  object.ingreso.a_patologicos.all %}
                        <p>{% if p.nombre == 'Otro' %}{{object.ingreso.a_patologicos_cual}}{% else %}{{ p }}{% endif%}</p>
                      {% endfor %}
                      {% else %}
                      Ninguno
                      {% endif %}
                  </td>
                  <th>Antecedentes Familiares relevantes:</th>
                  <td >{% if object.ingreso.a_familiares != None %}{{ object.ingreso.a_familiares }}{% else%} Ninguno {% endif %}</td>
                </tr>
                <tr class="table-secondary">
                  <th>Antecedentes quirúrgicos</th>
                  <td>
                      {% if object.ingreso.fecha_craneotomia == None and object.ingreso.causa_quirurgicos == None %} Ninguno {% endif%}
                      {% if object.ingreso.fecha_craneotomia != None %}<p>Craneotomía el {{ object.ingreso.fecha_craneotomia }}</p>{% endif %}
                      {% if object.ingreso.causa_quirurgicos != None %}<p>Otras Causas: {{ object.ingreso.causa_quirurgicos }}</p>{% endif %}
                  </td>
                  <th>Antecedentes Tóxico alérgicos:</th>
                  <td>{% if object.ingreso.a_toxico_alergenicos != None %}{{ object.ingreso.a_toxico_alergenicos }}{% else%} Ninguno {% endif %}</td>
                </tr>
                <tr class="table-success">
                  <th rowspan="2">Antecedentes Farmacológicos:</th>
                  {% if object.ingreso.a_farmaco1 != None %}
                  <td >{{ object.ingreso.a_farmaco1 }}</td>
                  <th>Dosis total/día</th>
                  <td>{{ object.ingreso.a_farmaco1_dosis }}</td>
                  {% else %}
                  <td colspan="3">Ninguno</td>
                  {% endif %}
                </tr>

                <tr class="table-success">
                  {% if object.ingreso.a_farmaco2 != None %}
                  <td >{{ object.ingreso.a_farmaco2 }}</td>
                  <th>Dosis total/día</th>
                  <td>{{ object.ingreso.a_farmaco2_dosis }}</td>
                  {% endif %}
                </tr>

                <tr class="table-success">
                  {% if object.ingreso.firma_consentimiento == True %}
                  <th>Firma de consentimiento informado</th>
                  <td colspan="3">Sí, el {{object.ingreso.fechafirma}}</td>
                  {% else %}
                  <th>Firma de consentimiento informado</th>
                  <td >No</td>
                  <th>Causa</th>
                  <td >{{ object.ingreso.firma_causa }}</td>
                  {% endif %}
                </tr>
              </tbody>
            </table>
          {% if perms.paciente.change_ingreso and object.inscrito == True %}
        <form>
          <button class="btn btn-primary" formaction="{% url 'ingreso_editar' object.ingreso.pk%}">Editar</button>
          </form>
          {% endif %}
        {% endif %}
      </div>
       <div class="tab-pane" id="radiologia">


         <form>
           {% if object.get_radio %}

           <table class="table table-hover">
             <thead>
             <tr>
               <th>Fecha</th>
               <th>Motivo no transportable</th>
             </tr>
             </thead>
             <tbody>
             {% for rf in object.get_radio %}
             <tr>
             <td>{{rf.fecha}}</td> <td>{{rf.razon}}</td>
             </tr>
           {% endfor %}
             </tbody>
           </table>

           {% endif %}


         {% if not object.radiologia or object.radiologia.fecha_procedimiento == None %}
          <p class="text-danger">No se encontro información de  Traslado a Radiología del Sujeto</p>
         {% if perms.paciente.add_radiologia and object.inscrito == True %}
          <label>Transportable   &nbsp;</label><a class="btn btn-primary" onclick="con()" >No</a>
          <script >
          function con() {

              var a = prompt("Motivo:", "");
              var n = a.length;

              while (n>95 || n == 0 ) {
                  var a = prompt("Motivo:", "");
                  var n = a.length;
              }
              a=a.replace(/ /g,"_");
              var url_mask = "{% url 'crear_rf' object.pk 'x' %}".replace('x', a.toString());
              window.location=url_mask;
          }
          </script>
          {% if object.radiologia %}
          <button class="btn btn-primary" formaction="{% url 'radiologia_editar' object.radiologia.pk %}">Si</button>
          {% else %}
          <button class="btn btn-primary" formaction="{% url 'crear_radiologia' object.pk%}">Si</button>
          {% endif %}
          {% endif %}
        {% endif %}
        </form>


        {% if object.radiologia and object.radiologia.fecha_procedimiento != None %}
        <table class="table table-hover">

              <tbody>
                <tr class="table-active">
                  <th>Fecha de procedimiento</th>
                  <td >{{ object.radiologia.fecha_procedimiento }} </td>
                  <th>Anestesiólogo</th>
                  <td>{{ object.radiologia.radiologo }}</td>
                </tr>

                <tr>
                  <th colspan="4" style="color:blue;">Pretransporte</th>
                </tr>

                <tr class="table-active">
                  <th>Transportable</th>
                  <td>{{ object.radiologia.transportable }} </td>
                    <th>Hora inicio</th>
                  <td>{{ object.radiologia.hora_inicio }} </td>
                </tr>
                <tr>
                  <th>Personal de Acompañamiento</th>
                  <td>
                    {% if object.radiologia.jefe_enfermeria == 'SI' %}
                      Jefe de enfermería <br>
                    {% endif %}
                    {% if object.radiologia.aux_enfermeria == 'SI' %}
                      Auxiliar de enfermería <br>
                    {% endif %}
                    {% if object.radiologia.medico_uci == 'SI' %}
                      Médico UCI <br>
                    {% endif %}
                    {% if object.radiologia.anestesiologo == 'SI' %}
                      Anestesiólogo <br>
                    {% endif %}
                    {% if object.radiologia.terapeuta_respiratorio == 'SI' %}
                      Terapeuta Respiratorio <br>
                    {% endif %}
                  </td>
                  <th>Soporte</th>
                  <td>
                    {% if object.radiologia.vmi == 'SI' %}
                      VMI <br>
                    {% endif %}
                    {% if object.radiologia.vasopresor == 'SI' %}
                      Vasopresor <br>
                    {% endif %}
                    {% if object.radiologia.ionotropico == 'SI' %}
                      Ionotrópico <br>
                    {% endif %}
                  </td>
                </tr>
                <tr>
                  <th colspan="4" style="color:blue;">Monitoreo de transporte UCI - Radiología</th>
                </tr>
                <tr>
                  <td></td><th colspan="2">Signos vitales</th>
                </tr>
                {% if object.radiologia.ur_pulsoximetro == 'SI' %}
                  <tr>
                    <td>Pulsoxímetro</td>
                    <td colspan="2">{{object.radiologia.ur_pulsoximetro_sv}}%</td>
                  </tr>
                {% endif %}
                {% if object.radiologia.ur_frecuencia_cardiaca == 'SI' %}
                  <tr>
                    <td >Frecuencia cardíaca</td>
                    <td colspan="2">{{object.radiologia.ur_frecuencia_cardiaca_sv}} latidos/min</td>
                  </tr>
                {% endif %}
                {% if object.radiologia.ur_frecuencia_respiratoria == 'SI' %}
                  <tr>
                    <td >Frecuencia respiratoria</td>
                    <td colspan="2">{{object.radiologia.ur_frecuencia_respiratoria_sv}} respiraciones/min</td>
                  </tr>
                {% endif %}
                {% if object.radiologia.ur_visoscopio == 'SI' %}
                  <tr>
                    <td >Visoscopio</td>
                    <td colspan="2">{{object.radiologia.ur_visoscopio_sv}}</td>
                  </tr>
                {% endif %}
                {% if object.radiologia.ur_tension == 'SI' %}
                  <tr>
                    <td >Tensión arterial</td>
                    <td colspan="2">{{object.radiologia.ur_tension_sv}} mmhg</td>
                  </tr>
                {% endif %}
                {% if object.radiologia.monitoreo == 'SI'%}
                <tr>
                  <th colspan="4" style="color:blue;">Monitoreo neurológico</th>
                </tr>
                <tr>
                  <th>#PIC</th><td>{{object.radiologia.pic}}</td>
                  <th>#PPC</th><td>{{object.radiologia.ppc}}</td>
                </tr>
                {% if object.radiologia.medicamentos_emergencia == 'SI' %}
                  <th>Medicamentos de emergencia</th>
                  <td>{{object.radiologia.me_cual}}</td>
                  <th>Dosis total</th>
                  <td>{{object.radiologia.me_dosis}}</td>
                {% endif %}
                <tr>
                {% endif %}
                  <th colspan="4" style="color:blue;">Monitoreo en resonancia</th>
                </tr>
                <tr>
                  <td></td><th>Dosis total</th><th colspan="2">Signos vitales</th>
                </tr>
                <tr>
                  {% if object.radiologia.sedacion == 'SI' %}
                    <td >Sedación</td>
                    <td >{{object.radiologia.sedacion_dt}}</td>
                  {%else%}
                  <td></td><td></td>
                  {% endif %}
                    <td colspan="2">{{object.radiologia.sedacion_sv}}%</td>
                </tr>
                <tr>
                  {% if object.radiologia.analgesia == 'SI' %}
                    <td >Analgesia</td>
                    <td >{{object.radiologia.analgesia_dt}}</td>
                  {%else%}
                  <td></td><td></td>
                  {% endif %}
                    <td colspan="2">{{object.radiologia.analgesia_sv}} latidos/min</td>
                </tr>
                <tr>
                  {% if object.radiologia.relajacion == 'SI' %}
                    <td >relajacion</td>
                    <td >{{object.radiologia.relajacion_dt}}</td>
                  {%else%}
                  <td></td><td></td>
                  {% endif %}
                    <td colspan="2">{{object.radiologia.relajacion_sv}} respiraciones/min</td>
                </tr>
                <tr>
                  <td colspan="2"></td>
                  <td colspan="2">{{object.radiologia.svadicional1}}</td>
                </tr>
                <tr>
                  <td colspan="2"></td>
                  <td colspan="2">{{object.radiologia.svadicional2}} mmhg</td>
                </tr>



                {% if object.radiologia.otra_medicacion == 'SI' %}
                  <th>Otra medicación administrada durante el procedimiento</th>
                  <td>{{object.radiologia.otra_medicacion_cual}}</td>
                  <th>Dosis total</th>
                  <td>{{object.radiologia.otra_medicacion_dt}}</td>
                {% endif %}

                <tr>
                  <th colspan="4" style="color:blue;">Monitoreo de transporte Radiología - UCI</th>
                </tr>
                <tr>
                  <td></td><th>Signos vitales</th>
                </tr>
                {% if object.radiologia.ru_pulsoximetro == 'SI' %}
                  <tr>
                    <td>Pulsoxímetro</td>
                    <td colspan="2">{{object.radiologia.ru_pulsoximetro_sv}}%</td>
                  </tr>
                {% endif %}
                {% if object.radiologia.ru_frecuencia_cardiaca == 'SI' %}
                  <tr>
                    <td >Frecuencia cardíaca</td>
                    <td colspan="2">{{object.radiologia.ru_frecuencia_cardiaca_sv}} latidos/min</td>
                  </tr>
                {% endif %}
                {% if object.radiologia.ru_frecuencia_respiratoria == 'SI' %}
                  <tr>
                    <td >Frecuencia respiratoria</td>
                    <td colspan="2">{{object.radiologia.ru_frecuencia_respiratoria_sv}} respiraciones/min</td>
                  </tr>
                {% endif %}
                {% if object.radiologia.ru_visoscopio == 'SI' %}
                  <tr>
                    <td >Visoscopio</td>
                    <td colspan="2">{{object.radiologia.ru_visoscopio_sv}}</td>
                  </tr>
                {% endif %}
                {% if object.radiologia.ru_tension == 'SI' %}
                  <tr>
                    <td >Tensión arterial</td>
                    <td colspan="2">{{object.radiologia.ru_tension_sv}} mmhg</td>
                  </tr>
                {% endif %}

              <tr>
                <th>Tiempo de resonancia</th>
                <td>{{object.radiologia.tiempo_sesonacia}} minutos</td>
                <th>Hora de llegada a UCI</th>
                <td>{{object.radiologia.hora_llegada}}</td>
              </tr>
              {% if object.radiologia.complicaciones == 'SI'%}
              <tr>
                <th >Complicaciones derivadas del transporte</th>
                <td colspan="3">{{object.radiologia.complicaciones_cuales}}</td>
              </tr>

              {% endif %}

              </tbody>
            </table>
         {% if perms.paciente.change_radiologia and object.inscrito == True %}
         <form>
          <button class="btn btn-primary" formaction="{% url 'radiologia_editar' object.radiologia.pk %}">Editar</button>
         </form>
         {% endif %}
        {% endif %}
      </div>
    <div class="tab-pane"  id="uci">
          {% if not object.uci %}
          <p class="text-danger">No se encontro información de  Uci</p>
            {% if perms.paciente.add_uci and object.inscrito == True %}
              <form>
              <button class="btn btn-primary" formaction="{% url 'crear_uci' object.pk %}">Añadir</button>
              </form>
              {% endif %}

          {% else %}

          {% if object.uci.fechauci != None %}

              <table class="table table-hover">

              <tbody>
                <tr class="table-active">
                  <th>Fecha </th>
                  <td>{{ object.uci.fechauci }} </td>
                  <th>Hora</th>
                  <td>{{ object.uci.horauci }} </td>
                </tr>
                <tr>
                  <th>Glasgow de seguimiento</th>
                  <td>
                    <p>Apertura ocular: {{ object.uci.apertura_ocular }}</p>
                    <p>Respuesta motora: {{ object.uci.respuesta_motora }}</p>
                    <p>Respuesta verbal: {{ object.uci.respuesta_verbal }}</p>
                  </td>
                  <th>Glasgow total </th>
                  <td>{{ object.uci.glasgowtotal }}</td>
                </tr>
              <tr>
                <th>Falla orgánica</th>
                <td>{% if object.uci.fallaorganica == "SI" %} Sí, {{object.uci.fallaorganica_cual}} {% else %} No {% endif %}</td>
                <th>Sepsis</th>
                <td>{% if object.uci.sepsis == "SI" %} Sí  {% else %} No {% endif %}</td>
              </tr>
              <tr>
                <th>Presión intracraneana</th>
                <td>{% if object.uci.presion_intracraneana == "SI" %} Sí {% else %} No {% endif %}</td>
                <th>Monitoría PIC</th>
                <td>{% if object.uci.monitoria_pic == "SI" %} Sí  {% else %} No {% endif %}</td>
              </tr>
              <tr>
                <th>Ventilación mecánica</th>
                <td>{% if object.uci.ventilacionmecanica == "SI" %} Sí {% else %} No {% endif %}</td>
                <th>Soporte vasopresor</th>
                <td>{% if object.uci.soportevasopresor == "SI" %} Sí,
                  con: <p>{% if object.uci.noradrenalina == "SI" %} Noradrenalina >0.5 Mcg Kg Min  {% endif %}</p>
                  <p>{% if object.uci.vasopresina == "SI" %} Vasopresina >2UI IV Hora  {% endif %}</p>
                  <p>{% if object.uci.adrenalina == "SI" %} Adrenalina. {% endif %}</p>
                  {% else %} No {% endif %}</td>
              </tr>
              <tr>
                <th>Sedación</th>
                {% if  object.uci.midazolan == "SI"  or  object.uci.tiopental == "SI" or object.uci.dexmedetomidina == "SI"  %}
                <td>
                  <p>{% if object.uci.midazolan == "SI" %} Midazolam : {{object.uci.midazolan_dt }} {% endif %} </p>
                  <p>{% if object.uci.tiopental == "SI" %} Tiopental : {{object.uci.tiopental_dt }} {% endif %} </p>
                  <p>{% if object.uci.dexmedetomidina == "SI" %} Dexmedetomidina : {{object.uci.dexmedetomidina_dt }} {% endif %} </p>
                </td>
                {% else %}
                <td>Ninguna</td>
                {% endif %}

                <th>Analgesia</th>
                {% if  object.uci.morfina == "SI"  or  object.uci.tiopental == "SI" or object.uci.dexmedetomidina == "SI"  %}
                <td>
                  <p>{% if object.uci.morfina == "SI" %} Morfina : {{object.uci.morfina_dt }} {% endif %} </p>
                  <p>{% if object.uci.hidromorfona == "SI" %} Hidromorfona : {{object.uci.hidromorfona_dt }} {% endif %} </p>
                  <p>{% if object.uci.fentanyl == "SI" %} Fentanyl : {{object.uci.fentanyl_dt }} {% endif %} </p>
                </td>
                {% else %}
                <td>Ninguna</td>
                {% endif %}

              </tr>

              <tr>
                <th>Anticonvulsivantes</th>
                {% if  object.uci.fenitoina == "SI"  or  object.uci.topiramato == "SI" or object.uci.acido_valproico == "SI" or object.uci.levetiracetam == "SI" or object.uci.lacosamida == "SI"  %}
                <td>
                  <p>{% if object.uci.fenitoina == "SI" %} Fenitoina : {{object.uci.fenitoina_dt }} {% endif %} </p>
                  <p>{% if object.uci.topiramato == "SI" %} Topiramato : {{object.uci.topiramato_dt }} {% endif %} </p>
                  <p>{% if object.uci.acido_valproico == "SI" %} Acido valproico : {{object.uci.acido_valproico_dt }} {% endif %} </p>
                  <p>{% if object.uci.levetiracetam == "SI" %} Levetiracetam : {{object.uci.levetiracetam_dt }} {% endif %} </p>
                  <p>{% if object.uci.lacosamida == "SI" %} Lacosamida : {{object.uci.lacosamida_dt }} {% endif %} </p>
                </td>
                {% else %}
                <td>Ninguna</td>
                {% endif %}

                <th>Antipsicóticos</th>
                {% if  object.uci.clozapina == "SI"  or  object.uci.haloperidol == "SI" or object.uci.ketiapina == "SI"  %}
                <td>
                  <p>{% if object.uci.clozapina == "SI" %} Clozapina : {{object.uci.clozapina_dt }} {% endif %} </p>
                  <p>{% if object.uci.haloperidol == "SI" %} Haloperidol : {{object.uci.haloperidol_dt }} {% endif %} </p>
                  <p>{% if object.uci.ketiapina == "SI" %} Ketiapina : {{object.uci.ketiapina_dt }} {% endif %} </p>
                </td>
                {% else %}
                <td>Ninguna</td>
                {% endif %}

              </tr>

              <tr>
                <th>Moduladores del ánimo</th>
                {% if  object.uci.carbamacepina == "SI"  or  object.uci.carbonato_litio == "SI" %}
                <td colspan="3">
                  <p>{% if object.uci.carbamacepina == "SI" %} Carbamacepina : {{object.uci.carbamacepina_dt }} {% endif %} </p>
                  <p>{% if object.uci.carbonato_litio == "SI" %} Carbonato de Litio : {{object.uci.carbonato_litio_dt }} {% endif %} </p>
                </td>
                {% else %}
                <td colspan="3">Ninguna</td>
                {% endif %}

              </tr>

              <tr>
                <th>Valorable por Neurología</th>
                <td colspan="3">{% if object.uci.valorable_neuro == "NO" %} No, {{object.uci.valorable_neuro_causa}} {% else %} Sí {% endif %}</td>
              </tr>
                {% if object.uci.valorable_neuro == "NO" %}
              <tr>
                <th>Paciente en condiciones de continuar en el estudio</th>
                <td colspan="3">{% if object.uci.continua_studio == "SI" %} Sí {% else %} No {% endif %}</td>
              </tr>
                {% endif %}

              </tbody>
            </table>

            {% if object.uci.glasgowtotal_e != '0' %}
            <legend>Evaluación de egreso UCI</legend>
              <table class="table table-hover">
                <tbody>
                <tr>
                  <th>Fecha del Egreso de la UCI</th>
                  <td>{{object.uci.fechaegreso}}</td>
                  <th>Hora</th>
                  <td>{{object.uci.horaegreso}}</td>
                </tr>
                <tr>
                  <th>Condición de egreso de UCI</th>
                  <td>{{object.uci.condicion_egreso}}</td>
                  <th>Dx de egreso</th>
                  <td>{{object.uci.dx_egreso}}</td>
                </tr>
                {% if object.uci.condicion_egreso == 'Fallecido' %}
                <tr>
                  <th>Causa de mortalidad</th>
                  <td>{{object.uci.causa_mortalidad}}</td>
                  <td>Fecha: {{object.uci.fechamortalidad}}</td>
                  <td>Hora: {{object.uci.horamortalidad}}</td>
                </tr>
                {% endif %}
                <tr>
                  <th>Glasgow de egreso UCI</th>
                  <td>
                    <p>Apertura ocular: {{ object.uci.apertura_ocular_e }}</p>
                    <p>Respuesta motora: {{ object.uci.respuesta_motora_e }}</p>
                    <p>Respuesta verbal: {{ object.uci.respuesta_verbal_e }}</p>
                  </td>
                  <th>Glasgow total </th>
                  <td>{{ object.uci.glasgowtotal_e }}</td>
                </tr>

                </tbody>

              </table>
            {% endif %}
      <form>
            {% if perms.paciente.change_uci and object.uci.glasgowtotal_e == '0' and object.inscrito == True %}

            <button class="btn btn-primary" formaction="{% url 'uci_editar' object.uci.pk %}">Realizar Evaluación de Egreso</button>

              {% endif %}
      </form>


          {% else %}
          <p class="text-danger">No se encontro información de  Uci</p>
            {% if perms.paciente.add_uci and object.inscrito == True %}
              <form>
              <button class="btn btn-primary" formaction="{% url 'uci_editar' object.uci.pk %}">Añadir</button>
              </form>
              {% endif %}
          {% endif %}


          {% endif %}






     </div>

    <div class="tab-pane"  id="neurologia">


          <form>
          {% if object.get_neuro|length == 0 or object.get_neuro.0.fechaneuro == None %}
          <p class="text-danger">No se encontro información Neurológica del Sujeto</p>
          {% if perms.paciente.add_neurologia and object.inscrito == True %}
          <button class="btn btn-primary" formaction="{% url 'crear_neurologia' object.pk %}">Añadir</button>
          {% endif %}
          {% endif %}
          </form>

          {% if object.get_neuro %}

      <div class="panel-group">
        <div class="panel panel-default">
          {% for neuro in object.get_neuro %}
          {% if neuro.fechaneuro != None %}

          <div class="panel-heading">
            <h4 class="panel-title">
              <a data-toggle="collapse" href="#expand{{ forloop.counter0 }}"><b>{{neuro.fechaneuro}}</b></a>
              {% if neuro.epileptico == "SI" and neuro.fechaeeg == None %}
              <a style="color:red;">Falta información EEG</a>
              {% endif%}
            </h4>
          </div>
          <div id="expand{{ forloop.counter0 }}" class="panel-collapse collapse">
            <div class="panel-body">
              {% if neuro.epileptico == "SI" and neuro.fechaeeg == None and perms.paciente.change_neurologia %}

              <a type="button" class="btn btn-link" onclick="location.href = '{% url 'neurologia_editar' neuro.pk %}'">Rellenar información EEG</a>

                {% endif%}
              <table class="table table-hover">

              <tbody>
                <tr class="table-active">
                  <th>Fecha </th>
                  <td>{{ neuro.fechaneuro }} </td>
                  <th>Neurólogo</th>
                  <td>{{ neuro.neurologo }} </td>
                </tr>
                <tr>
                  <td colspan="4" style="color:blue">COMA RECOVERY SCALE-REVISED</td>
                </tr>
              <tr>
                <th>Escala de función auditiva</th>
                <td>
                  ({{neuro.auditiva}})
                  {% if neuro.auditiva == '4' %} Movimiento consistente a la orden
                  {% elif neuro.auditiva == '3' %} Reproduce movimiento a la orden
                  {% elif neuro.auditiva == '2' %} Localiza el sonido
                  {% elif neuro.auditiva == '1' %} Percibe pero no localiza (Sobresalto auditivo)
                  {% elif neuro.auditiva == '0' %} No hay respuesta

                  {% endif %}
                </td>
                <th>Escala de función visual</th>
                <td>
                  ({{neuro.visual}})
                  {% if neuro.visual == '5' %} Reconoce el objeto
                  {% elif neuro.visual == '4' %} Localiza el objeto: alcanza
                  {% elif neuro.visual == '3' %} Seguimiento visual
                  {% elif neuro.visual == '2' %} Fijación visual
                  {% elif neuro.visual == '1' %} Sobresalto visual
                  {% elif neuro.visual == '0' %} No hay respuesta

                  {% endif %}
                </td>
              </tr>
              <tr>
                <th>Escala de función motora</th>
                <td>
                  ({{neuro.motora}})
                  {% if neuro.motora == '6' %} Uso funcional del objeto
                  {% elif neuro.motora == '5' %} Respuesta motora automática
                  {% elif neuro.motora == '4' %} Manipulación de objetos
                  {% elif neuro.motora == '3' %} Localización de estímulos dolorosos
                  {% elif neuro.motora == '2' %} Retirada flexora
                  {% elif neuro.motora == '1' %} Postura anormal
                  {% elif neuro.motora == '0' %} No hay respuesta/flacidez

                  {% endif %}
                </td>
                <th>Escala de función oromotora/verbal</th>
                <td>
                  ({{neuro.verbal}})
                  {% if neuro.verbal == '3' %} Verbalización entendible
                  {% elif neuro.verbal == '2' %} Movimientos orales/vocalizaciones
                  {% elif neuro.verbal == '1' %} Movimientos orales reflejos
                  {% elif neuro.verbal == '0' %} No hay respuesta

                  {% endif %}
                </td>
              </tr>
              <tr>
                <th>Escala de comunicación</th>
                <td>
                  ({{neuro.comunicacion}})
                  {% if neuro.comunicacion == '2' %} Funcional: Adecuada
                  {% elif neuro.comunicacion == '1' %} No funcional: Intencional
                  {% elif neuro.comunicacion == '0' %} No hay respuesta

                  {% endif %}
                </td>
                <th>Escala de nivel de alerta</th>
                <td>
                  ({{neuro.alerta}})
                  {% if neuro.alerta == '3' %} Alerta y atento
                  {% elif neuro.alerta == '2' %} Apertura ocular espontánea
                  {% elif neuro.alerta == '1' %} Apertura ocular con estimulación
                  {% elif neuro.alerta == '0' %} No hay respuesta

                  {% endif %}
                </td>
              </tr>
              <tr>
                <th>Total</th>
                <td colspan="3">{{ neuro.total1 }}</td>
              </tr>

              <tr>
                  <td colspan="4" style="color:blue">Full Outline of UnResponsiveness FOUR</td>
                </tr>
              <tr>
                <th>Apertura ocular</th>
                <td>
                  ({{neuro.aperturaocular}})
                  {% if neuro.aperturaocular == '4' %} Dirige la mirada en respuesta a órdenes
                  {% elif neuro.aperturaocular == '3' %} Espontánea pero no dirige la mirada
                  {% elif neuro.aperturaocular == '2' %} Apertura a estímulos sonoros intensos
                  {% elif neuro.aperturaocular == '1' %} Apertura a estímulos nociceptivos
                  {% elif neuro.aperturaocular == '0' %} Ojos cerrados al dolor
                  {% endif %}
                </td>
                <th>Respuesta Motora</th>
                <td>
                  ({{neuro.respuestamotora}})
                  {% if neuro.respuestamotora == '4' %} Obedece órdenes
                  {% elif neuro.respuestamotora == '3' %} Localiza estímulos dolorosos
                  {% elif neuro.respuestamotora == '2' %} Respuesta flexora al dolor en MMSS (Decorticación y retirada)
                  {% elif neuro.respuestamotora == '1' %} Respuesta extensora al dolor (Descerebración)
                  {% elif neuro.respuestamotora == '0' %} Ninguna o Estado mioclónico generalizado
                  {% endif %}
                </td>
              </tr>
              <tr>
                <th>Reflejos del Tronco</th>
                <td>
                  ({{neuro.reflejos}})
                  {% if neuro.reflejos == '4' %} Ambos reflejos corneales y fotomotores presentes
                  {% elif neuro.reflejos == '3' %} Reflejo motor ausente unilateral
                  {% elif neuro.reflejos == '2' %} Reflejos corneales <b>o</b> fotomotores ausentes
                  {% elif neuro.reflejos == '1' %} Reflejos corneales <b>y</b> fotomotores ausentes
                  {% elif neuro.reflejos == '0' %} Reflejos corneales, fotomotores y tusígeno ausentes
                  {% endif %}
                </td>
                <th>Respiración</th>
                <td>
                  ({{neuro.respiracion}})
                  {% if neuro.respiracion == '4' %} No intubado, respiración rítmica
                  {% elif neuro.respiracion == '3' %} No intubado, respiración de Cheyene- Stokes
                  {% elif neuro.respiracion == '2' %} No intubado, respiración irregular
                  {% elif neuro.respiracion == '1' %} Intubado, respira por encima de la frecuencia del respirador
                  {% elif neuro.respiracion == '0' %} Intubado, respira a la frecuencia del respirador o apnea
                  {% endif %}
                </td>
              <tr>
                  <th>Total</th>
                  <td>{{neuro.total2}}</td>
                  <th>Resultado</th>
                  <td>
                    <script>
                      var x="{{neuro.total2}}";
                      x=parseInt(x);
                      if ( x < 8 ){
                      document.write("Severa injuria cerebral");
                      }
                      if ( x > 7 && x < 13 ){
                      document.write("Moderada injuria cerebral");
                      }
                      if ( x > 12 ){
                      document.write("Leve injuria cerebral");
                      }


                    </script>
                  </td>
                </tr>
              <tr>
                <th colspan="2">Dx Estado de conciencia</th>
                <td colspan="2">{{neuro.estadoconciencia}}</td>
              </tr>
              <tr>
                <th colspan="2">Sospecha de estatus epiléptico no convulsivo</th>
                <td colspan="2">{{neuro.epileptico}}</td>
              </tr>

                {% if neuro.epileptico == "SI" and neuro.fechaeeg != None %}
              <tr>
                <th>Toma EEG</th>
                <td>{{neuro.fechaeeg}}</td>
                <th>Resultado EEG</th>
                <td>{{neuro.resultadoeeg}}</td>
              </tr>
              {% endif %}


              </tbody>
            </table>

            </div>

          </div>
          <br>

          {% endif %}
          {% endfor%}
        </div>
      </div>


          {% if perms.paciente.add_neurologia and object.inscrito == True and object.get_neuro.0.fechaneuro != None %}
          <form>
          <button class="btn btn-primary" formaction="{% url 'crear_neurologia' object.pk %}">Añadir nueva valoración neurológica</button>
          </form>
          {% endif %}
        {% endif %}

     </div>
    <div class="tab-pane"  id="bold">
      <form>
          {% if not object.bold or object.bold.fechaimg == None %}
          <p class="text-danger">No se encontro información del protocolo</p>
          {% if perms.paciente.add_bold and object.inscrito == True %}
          {% if object.bold %}
          <button class="btn btn-primary" formaction="{% url 'bold_editar' object.bold.pk %}">Añadir</button>
          {% else %}
          <button class="btn btn-primary" formaction="{% url 'crear_bold' object.pk %}">Añadir</button>
          {% endif %}
          {% endif %}
        {% endif %}
        </form>


          {% if object.bold and object.bold.fechaimg != None %}
          <table class="table table-hover">

              <tbody>
                <tr class="table-active">
                  <th>Fecha de captura de imágenes </th>
                  <td>{{ object.bold.fechaimg }} </td>
                  <th>Responsable</th>
                  <td>{{ object.bold.responsable }}</td>
                </tr>
              <tr>
                <th>Captura en CD</th>
                <td colspan="3">{% if object.bold.cd == True %} Sí {% else %} No {% endif %}</td>
              </tr>

              </tbody>
            </table>
          <legend>Parámetros del protocolo de adquisición de imágenes</legend>
          <table class="table table-hover">

              <tbody>
                <tr class="table-active">
                  <th>AX T2 Prop </th>
                  <td>
                    {% if object.bold.axt2prop == True %}
                    <p>{% if object.bold.axt2prop1 == True %} Plane: Oblique {% endif %}</p>
                    <p>{% if object.bold.axt2prop2 == True %} FOV 22.0cm {% endif %}</p>
                    <p>{% if object.bold.axt2prop3 == True %} Slice Thickness 6.0mm {% endif %}</p>
                    <p>{% if object.bold.axt2prop4 == True %} Slice Spacing 1.0mm {% endif %}</p>
                    <p>{% if object.bold.axt2prop5 == True %} TR 6000ms {% endif %}</p>
                    {% else %}
                    No
                    {% endif %}
                  </td>
                  <th>DIFUSSION</th>
                  <td>
                    {% if object.bold.difussion == True %}
                    <p>{% if object.bold.difussion1 == True %} Scan plane: Oblique {% endif %}</p>
                    <p>{% if object.bold.difussion2 == True %} FOV 22.0 {% endif %}</p>
                    <p>{% if object.bold.difussion3 == True %} Slice Thickness 6.0mm {% endif %}</p>
                    <p>{% if object.bold.difussion4 == True %} Spacing 1.0mm {% endif %}</p>
                    <p>{% if object.bold.difussion5 == True %} Freq Dir: R/L {% endif %}</p>
                    <p>{% if object.bold.difussion6 == True %} TR 6000ms {% endif %}</p>
                    <p>{% if object.bold.difussion7 == True %} Minimum TR 1000.0 {% endif %}</p>
                    {% else %}
                    No
                    {% endif %}
                  </td>
                </tr>
                <tr class="table-active">
                  <th>RESTING </th>
                  <td>
                    {% if object.bold.resting == True %}
                    <p>{% if object.bold.resting1 == True %} Scan plane: Axial {% endif %}</p>
                    <p>{% if object.bold.resting2 == True %} FOV 28.8 {% endif %}</p>
                    <p>{% if object.bold.resting3 == True %} Phase FOV 1.00 {% endif %}</p>
                    <p>{% if object.bold.resting4 == True %} Slice Thickness 4.5mm {% endif %}</p>
                    <p>{% if object.bold.resting5 == True %} Spacing 0.0mm {% endif %}</p>
                    <p>{% if object.bold.resting6 == True %} Freq Dir: R/L {% endif %}</p>
                    <p>{% if object.bold.resting7 == True %} TR 3000ms {% endif %}</p>
                    <p>{% if object.bold.resting8 == True %} Minimum TR 89.0 {% endif %}</p>
                    {% else %}
                    No
                    {% endif %}
                  </td>
                  <th>3D AX Obl T1</th>
                  <td>
                    {% if object.bold.obl == True %}
                    <p>{% if object.bold.obl1 == True %} Scan plane: Axial {% endif %}</p>
                    <p>{% if object.bold.obl2 == True %} FOV 25.0 {% endif %}</p>
                    <p>{% if object.bold.obl3 == True %} Phase FOV 0.90 {% endif %}</p>
                    <p>{% if object.bold.obl4 == True %} Slice Thickness 2.0mm {% endif %}</p>
                    <p>{% if object.bold.obl5 == True %} Freq Dir: A/P {% endif %}</p>
                    <p>{% if object.bold.obl6 == True %} Minimum TR 6.7 {% endif %}</p>
                    {% else %}
                    No
                    {% endif %}
                  </td>
                </tr>

                <tr class="table-active">
                  <th>AX FLAIR </th>
                  <td>
                    {% if object.bold.flair == True %}
                    <p>{% if object.bold.flair1 == True %} Scan plane: Oblique {% endif %}</p>
                    <p>{% if object.bold.flair2 == True %} FOV 22.0 {% endif %}</p>
                    <p>{% if object.bold.flair3 == True %} Slice Thickness 6.0mm {% endif %}</p>
                    <p>{% if object.bold.flair4 == True %} Spacing 1.0mm {% endif %}</p>
                    <p>{% if object.bold.flair5 == True %} Freq Dir: Unswap {% endif %}</p>
                    <p>{% if object.bold.flair6 == True %} TR 9000ms {% endif %}</p>
                    <p>{% if object.bold.flair7 == True %} Minimum TR 5000.0 {% endif %}</p>
                    {% else %}
                    No
                    {% endif %}
                  </td>
                  <th>ASSET Cal</th>
                  <td>
                    {% if object.bold.cal == True %}
                    <p>{% if object.bold.cal1 == True %} Scan plane: Axial {% endif %}</p>
                    <p>{% if object.bold.cal2 == True %} FOV 30.0 {% endif %}</p>
                    <p>{% if object.bold.cal3 == True %} Slice Thickness 6.0mm {% endif %}</p>
                    <p>{% if object.bold.cal4 == True %} Freq Dir: A/P {% endif %}</p>
                    <p>{% if object.bold.cal5 == True %} Minimum TR 150.0 {% endif %}</p>
                    {% else %}
                    No
                    {% endif %}
                  </td>
                </tr>

              <tr class="table-active">
                  <th>AXIAL SWI </th>
                  <td>
                    {% if object.bold.swi == True %}
                    <p>{% if object.bold.swi1 == True %} Scan plane: Oblique {% endif %}</p>
                    <p>{% if object.bold.swi2 == True %} FOV 22.0 {% endif %}</p>
                    <p>{% if object.bold.swi3 == True %} Phase FOV 1.00 {% endif %}</p>
                    <p>{% if object.bold.swi4 == True %} Slice Thickness 6.0mm {% endif %}</p>
                    <p>{% if object.bold.swi5 == True %} Spacing 1.0mm {% endif %}</p>
                    <p>{% if object.bold.swi6 == True %} Freq Dir: Unswap {% endif %}</p>
                    <p>{% if object.bold.swi7 == True %} TR 4375ms {% endif %}</p>
                    <p>{% if object.bold.swi8 == True %} Minimum TR 394.0 {% endif %}</p>
                    {% else %}
                    No
                    {% endif %}
                  </td>
                  <th>TENSOR AXI</th>
                  <td>
                    {% if object.bold.tensor == True %}
                    <p>{% if object.bold.tensor1 == True %} Scan plane: Axial {% endif %}</p>
                    <p>{% if object.bold.tensor2 == True %} FOV 25.0 {% endif %}</p>
                    <p>{% if object.bold.tensor3 == True %} Phase FOV 1.00 {% endif %}</p>
                    <p>{% if object.bold.tensor4 == True %} Slice Thickness 2.5mm {% endif %}</p>
                    <p>{% if object.bold.tensor5 == True %} Spacing 0.0mm {% endif %}</p>
                    <p>{% if object.bold.tensor6 == True %} Freq Dir: R/L {% endif %}</p>
                    <p>{% if object.bold.tensor7 == True %} TR 17000ms {% endif %}</p>
                    <p>{% if object.bold.tensor8 == True %} Minimum TR 1000 {% endif %}</p>

                    {% else %}
                    No
                    {% endif %}
                  </td>
                </tr>


              </tbody>
            </table>
            <legend>Verificación de parámetros para postproceso</legend>

          <div>

            <div class="left">
              <table class="table table-hover">
                <tbody>
                <tr>
                  <th>T1</th>
                  <td>{% if object.bold.t1A == False and object.bold.t1G == False and object.bold.t1M == False %}
                      No {% endif %}</td>
                </tr>
                {% if object.bold.t1A == True %}
                <tr>
                  <td>Axial</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                {% if object.bold.t1G == True %}
                <tr>
                  <td>Grosor 2mm</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                {% if object.bold.t1M == True %}
                <tr>
                  <td>Movimiento</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                <tr>
                  <th>T2</th>
                  <td>{% if object.bold.t2A == False and object.bold.t2M == False %}
                      No {% endif %}</td>
                </tr>
                {% if object.bold.t2A == True %}
                <tr>
                  <td>Axial</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                {% if object.bold.t2M == True %}
                <tr>
                  <td>Movimiento</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                <tr>
                  <th>FLAIR</th>
                  <td>{% if object.bold.flairA == False and object.bold.flairM == False %}
                      No {% endif %}</td>
                </tr>
                {% if object.bold.flairA == True %}
                <tr>
                  <td>Axial</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                {% if object.bold.flairM == True %}
                <tr>
                  <td>Movimiento</td>
                  <td>Sí</td>
                </tr>
                {% endif %}

                </tbody>
              </table>

            </div>

            <div class="right">

              <table class="table table-hover">
                <tbody>
                <tr>
                  <th>TENSOR - DWI</th>
                  <td>{% if object.bold.tensorA == False and object.bold.tensord == False and object.bold.tensorG == False and object.bold.tensorM == False %}
                      No {% endif %}</td>
                </tr>
                {% if object.bold.tensorA == True %}
                <tr>
                  <td>Axial</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                {% if object.bold.tensord == True %}
                <tr>
                  <td>30 direcciones</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                {% if object.bold.tensorG == True %}
                <tr>
                  <td>Grosor 2mm</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                {% if object.bold.tensorM == True %}
                <tr>
                  <td>Movimiento</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                <tr>
                  <th>fMRI RESTING</th>
                  <td>{% if object.bold.restingA == False and object.bold.restingV == False and object.bold.restingG == False and object.bold.restingT == False and object.bold.restingM == False %}
                      No {% endif %}</td>
                </tr>
                {% if object.bold.restingA == True %}
                <tr>
                  <td>Axial</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                {% if object.bold.restingV == True %}
                <tr>
                  <td>180 volúmenes</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                {% if object.bold.restingG == True %}
                <tr>
                  <td>Grosor 4.5mm</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                {% if object.bold.restingT == True %}
                <tr>
                  <td>TR 3000ms</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                {% if object.bold.restingM == True %}
                <tr>
                  <td>Movimiento</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                <tr>
                  <th>DIFUSSION</th>
                  <td>{% if object.bold.difussionA == False and object.bold.difussionM == False %}
                      No {% endif %}</td>
                </tr>
                {% if object.bold.difussionA == True %}
                <tr>
                  <td>Axial</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                {% if object.bold.difussionM == True %}
                <tr>
                  <td>Movimiento</td>
                  <td>Sí</td>
                </tr>
                {% endif %}
                </tbody>
              </table>

            </div>

        </div>


          <div class="container">
          {% if perms.paciente.change_bold and object.inscrito == True %}
          <form>
          <button class="btn btn-primary" formaction="{% url 'bold_editar' object.bold.pk %}">Editar</button>
          </form>
          {% endif %}
          </div>
          {% endif %}
     </div>



    <div class="tab-pane"  id="informante">


          {% if not object.informante or object.informante.fechaentrevista == None %}
          <p class="text-danger">No se encontro información neuropsicológica </p>
          {% if perms.paciente.add_informante and object.inscrito == True %}
      <form>
           {% if object.edad > 59 %}
              {% if object.mayor %}
              <button class="btn btn-primary" formaction="{% url 'mayor_editar' object.mayor.pk %}">Añadir</button>
              {% else %}
              <button class="btn btn-primary" formaction="{% url 'crear_informante' object.pk %}">Añadir</button>
              {% endif %}

           {% else %}
              {% if object.informante %}
              <button class="btn btn-primary" formaction="{% url 'informante_editar' object.informante.pk %}">Añadir</button>
              {% else %}
              <button class="btn btn-primary" formaction="{% url 'crear_informante' object.pk %}">Añadir</button>
              {% endif %}

           {% endif %}
      </form>

          {% endif %}
        {% endif %}



          {% if object.informante and object.informante.fechaentrevista != None %}

            {% if object.mayor %}
              <table class="table table-hover">
              <tbody>
                <tr class="table-active">
                  <th>Fecha de entrevista clínica </th>
                  <td>{{ object.mayor.fechaentrevista }} </td>
                  <th>Neuropsicóloga:</th>
                  <td>{{ object.mayor.neuropsicologa }}</td>
                </tr>

              <tr>
                <th>Parentezco</th>
                <td>{{ object.mayor.parentezco }}</td>
                <th>Confiable</th>
                <td>{{ object.mayor.confiable }}</td>
              </tr>
                {% if user.groups.all.0.name == 'Coordinador' %}
              <tr>
                <th>Informante</th>
                <td colspan="3">{{ object.mayor.informante }}</td>
              </tr>
                {% endif %}
              <tr>
                <td colspan="4">
                  <legend>S - I.Q.C.O.D.E.</legend>
                </td>
              </tr>
              <tr>
                  <th>Resultado</th>
                  <td>{{object.mayor.resultado}}</td>
                  <th>Total</th>
                  <td>{{object.mayor.total}}</td>
                </tr>
              <tr>
                <td colspan="4">
                  <legend>ESCALA DE DETERIORO GLOBAL (GDS)</legend>
                </td>
              </tr>
              <tr>
                <th>Severidad GDS:</th>
                <td colspan="3">
                  {{object.mayor.severidadgds}}
                  {% if object.mayor.severidadgds == "1" %}
                    Normal, Ningún deterioro cognoscitivo
                  {% endif %}
                  {% if object.mayor.severidadgds == "2" %}
                    Olvidadizo, Muy ligero deterioro cognoscitivo
                  {% endif %}
                  {% if object.mayor.severidadgds == "3" %}
                    Confuso, Ligero deterioro cognoscitivo
                  {% endif %}
                  {% if object.mayor.severidadgds == "4" %}
                    Bastante confuso, Moderado deterioro cognoscitivo
                  {% endif %}
                  {% if object.mayor.severidadgds == "5" %}
                    Demencia temprana, Moderadamente severo deterioro cognoscitivo
                  {% endif %}
                  {% if object.mayor.severidadgds == "6" %}
                    Demencia moderada, Severo deterioro cognoscitivo
                  {% endif %}
                  {% if object.mayor.severidadgds == "7" %}
                    Demencia severa, Profundo deterioro cognoscitivo
                  {% endif %}
                </td>
              </tr>
              <tr>
                <th>Dx Demencia</th>
                <td>{{object.mayor.dxdemencia}}</td>
                <th>Tiempo de evolución</th>
                <td>{{object.mayor.tiempo}}</td>
              </tr>
              </tbody>
            </table>


           {% else %}
            <table class="table table-hover">
              <tbody>
                <tr class="table-active">
                  <th>Fecha de entrevista clínica </th>
                  <td>{{ object.informante.fechaentrevista }} </td>
                  <th>Neuropsicóloga:</th>
                  <td>{{ object.informante.neuropsicologa }}</td>
                </tr>
              <tr>
                <th>Parentezco</th>
                <td>{{ object.informante.parentezco }}</td>
                <th>Confiable</th>
                <td>{{ object.informante.confiable }}</td>
              </tr>
                {% if user.groups.all.0.name == 'Coordinador' %}
              <tr>
                <th>Informante</th>
                <td colspan="3">{{ object.informante.informante }}</td>
              </tr>
                {% endif %}

              </tbody>
            </table>

           {% endif %}


          <legend>Funcionamiento Premórbido:</legend>


          <table class="table table-hover">
              <tbody>
                <tr class="table-active">
                  <th>Escala Lawton-Brody de actividades instrumentales </th>
                  <td>Total {{object.informante.totalindependencia}} </td>
                  <th>Escala de transtornos de memoria</th>
                  <td>Total {{object.informante.totalmemoria}}/45</td>
                </tr>
              <tr>
                <th colspan="4">Frontal Systems Behavior Scale (FrSBe)</th>
              </tr>
              <tr>
                <th>Total Apatia</th> <td>{{object.informante.totalapatia}}</td>
              </tr>
              <tr>
                <th>Total Deshinhibicion</th> <td>{{object.informante.totaldes}}</td>
              </tr>
              <tr>
                <th>Total Funciones ejecutivas</th> <td>{{object.informante.totalfunciones}}</td>
              </tr>
              </tbody>
            </table>


          {% if perms.paciente.change_informante and object.inscrito == True %}
          <form>
          {% if object.edad > 59 %}
              <button class="btn btn-primary" formaction="{% url 'mayor_editar' object.mayor.pk %}">Editar</button>

           {% else %}
              <button class="btn btn-primary" formaction="{% url 'informante_editar' object.informante.pk %}">Editar</button>

           {% endif %}
          </form>
          {% endif %}
          {% endif %}
     </div>
    <div class="tab-pane"  id="imagen" >
        <input id="sn" value="{{object.sujeto_numero}}" hidden>

    <iframe src="{% url 'upload-new' %}"
                marginwidth="0" marginheight="0" name="ventana_iframe" scrolling="no" border="0"
                frameborder="0" width="800" height="400">
                </iframe>

      </div>
    <div class="tab-pane"  id="moca">
      <form>

          {% if not object.valorablenps %}

          {% if not object.moca.set_all.0 or object.moca.set_all.0.fecha == None %}
          <p class="text-danger">No se encontro información de evaluación MOCA</p>
          {% tiempoeventoprincipal object as tep %}

          {% if perms.paciente.add_moca and tep %}
        <label>Valorable por Neuropsicología   &nbsp;</label><a id="nov" class="btn btn-primary" onclick="ver()" >No</a>
        <button id="siv" class="btn btn-primary" formaction="{% url 'crear_moca' object.pk %}">Si</button>



          <br>
          <table>
            <tbody>
            <tr>
              <th><label id="causa" style="display:none">Causa</label></th>
              <td>
          <select id="causa_options" style="display:none" onchange="nps()">
              <option  value="0">Seleccione una opción</option>
              <option  value="1">Fallecido</option>
              <option  value="2">No localizable</option>
              <option  value="3">No colabora</option>
              <option  value="4">EMC</option>
              <option  value="5">SVSR</option>
          </select>
              </td>
              <td>
                <label id="labelfecha" style="display:none">Fecha: </label>
              </td>
              <td>
                <input id="datefallecido" type="date" style="display:none" class="form-control" min="{{object.uci.fechaegreso|date:'Y-m-d'}}" onchange="nps()">
              </td>
            </tr>
            </tbody>
          </table>



          <script >
          function ver() {
              document.getElementById("nov").style="display:none" ;
              document.getElementById("siv").style="display:none" ;
              document.getElementById("causa").style="display:inline" ;
              document.getElementById("causa_options").style="display:inline" ;
          }
          function nps() {
              var c=document.getElementById("causa_options").value ;
              var f=document.getElementById("datefallecido").value ;
              if ( c == 1 && f == "" ){
              document.getElementById("datefallecido").style="display:inline" ;
              document.getElementById("labelfecha").style="display:inline" ;
              var today = new Date();
              var dd = today.getDate();
              var mm = today.getMonth()+1; //January is 0!
              var yyyy = today.getFullYear();
               if(dd<10){
                      dd='0'+dd
                  }
                  if(mm<10){
                      mm='0'+mm
                  }

              today = yyyy+'-'+mm+'-'+dd;
              document.getElementById("datefallecido").max=today;
              } else {
              var url_mask = "{% url 'crear_nps' object.pk 'x' 'y' %}"
              url_mask=url_mask.replace('x', c.toString());
              if ( f == "" ){
              f="None";
              }
              url_mask=url_mask.replace('y', f.toString());
              window.location=url_mask;
              }
          }
          </script>
          {% endif %}
          {% endif %}
          {% elif object.valorablenps and object.valorablenps.valorable == False %}
          <br>
          <ul>
            <li>{{object.valorablenps.fecha}}: No es valorable por Neuropsicología.</li>
            <li>Causa: {{object.valorablenps.razon}} {% if object.valorablenps.fechafallecido != None %} {{object.valorablenps.fechafallecido}} {% endif %}</li>
            {% tiempoeventoprincipal object as tep %}

            {% if object.valorablenps.razon != "Fallecido" and tep %}
            <br>
            <button class="btn btn-primary" formaction="{% url 'crear_moca' object.pk %}">Realizar evaluación MOCA</button>
            <br>
            <p>Posible Antes de los 6 meses desde el evento principal </p>
            {% endif %}
          </ul>
          {% else %}


        <br>
        {% if object.moca_set.all %}

        {% if object.valorablenps and object.valorablenps.razon != "Fallecido" and object.valorablenps.razon != None %}

          <ul>
            <li>{{object.valorablenps.fecha}}: No es valorable por Neuropsicología.</li>
            <li>Causa: {{object.valorablenps.razon}} </li>

          </ul>
        {% endif %}
      <div class="panel-group">
        <div class="panel panel-default">
          {% for moca in object.moca_set.all %}
          {% if moca.fecha != None %}

          <div class="panel-heading">
            <h4 class="panel-title">
              <a data-toggle="collapse" href="#mo{{ forloop.counter0 }}"><b>{{moca.fecha}} &nbsp;&nbsp;  Puntaje MOCA</b></a></h4>
          </div>

          <div id="mo{{ forloop.counter0 }}" class="panel-collapse collapse">
            <div class="panel-body">

              <table class="table table-hover">
          <tbody>
           <tr>
              <th colspan="4" style="vertical-align: middle;"><label>Puntaje MOCA</label></th>
          </tr>

          <tr>
              <th style="vertical-align: middle;">Función visoespacial</th>
              <td>{{moca.funcion_visoespacial}}/5</td>
              <th style="vertical-align: middle;">Identificación</th>
              <td>{{moca.identificacion}}/3</td>
          </tr>
          <tr>
              <th style="vertical-align: middle;">Atención</th>
              <td>
                  <table>
                      <tbody>
                      <tr>
                          <td style="vertical-align: middle;">Número</td><td>{{moca.atencion_numero}}/2</td>
                      </tr>
                      <tr><td style="vertical-align: middle;">Letras</td><td>{{moca.atencion_letras}}/1</td></tr>
                      <tr>
                          <td style="vertical-align: middle;">Resta</td><td>{{moca.atencion_resta}}/3</td>
                      </tr>
                      </tbody>
                  </table>
              </td>
              <th style="vertical-align: middle;">Lenguaje</th>
              <td>
                  <table>
                      <tbody>
                      <tr>
                          <td style="vertical-align: middle;">Repite</td><td>{{moca.lenguaje_repite}}/2</td>
                      </tr>
                      <tr><td style="vertical-align: middle;">Fluidez</td><td>{{moca.lenguaje_fluidez}}/1</td></tr>
                      </tbody>
                  </table>
              </td>
          </tr>
          <tr>
              <th style="vertical-align: middle;">Abstracción</th>
              <td>{{moca.abstraccion}}/2</td>
              <th style="vertical-align: middle;">Recuerdo Diferido</th>
              <td>{{moca.recuerdo}}/5</td>
          </tr>
          <tr>
              <th style="vertical-align: middle;">Orientación</th>
              <td>{{moca.orientacion}}/6</td>
              <th style="vertical-align: middle;">Total</th>
              <td>{{moca.total}}/30</td>
          </tr>
          </tbody>
        </table>

            </div>

          </div>
          <br>

          {% endif %}
          {% endfor%}
        </div>
      </div>

          <br>
          {% tiempoeventoprincipal object as tep %}
          {% if perms.paciente.add_moca and object.inscrito == True and tep %}
          <form>
          <button class="btn btn-primary" formaction="{% url 'crear_moca' object.pk %}">Añadir nueva valoración neuropsicológica (MOCA)</button>
          <p>Posible Antes de los 6 meses desde el evento principal. </p>

          {% endif %}
          <br>
            {% if not object.neuropsi or object.neuropsi.fecha == None %}
            {% if perms.paciente.add_moca and object.inscrito == True  %}
          <button class="btn btn-primary" formaction="{% url 'crear_neuropsi' object.pk %}">Añadir valoración neuropsicológica (Neuropsi)</button>
            {% endif %}
            {% else %}

            <table class="table table-hover">
                    <caption style="text-align:left"><h3>NEUROPSI  {{object.neuropsi.fecha}}</h3></caption>
                    <tbody>
                    <tr>
                        <th colspan="4">Observaciones médicas y neurológicas</th>
                    </tr>

                    <tr>
                        <th style="vertical-align:middle;">Medicado</th>
                        <td style="vertical-align:middle;" {% if object.neuropsi.medicado == 'NO' %} colspan="3" {% endif %}>
                          {{object.neuropsi.medicado}}
                          {% if object.neuropsi.medicado == "SI" %}
                          {{object.neuropsi.medicado_cual}}
                          {% endif %}
                        </td>
                        {% if object.neuropsi.medicado == "SI" %}
                        <th>Dosis total dia</th>
                        <td>{{object.neuropsi.medicado_dt}}</td>
                        {% endif%}
                    </tr>
                    <tr>
                        <th style="vertical-align:middle;" >Imagen</th>

                        <td colspan="3">{% if object.neuropsi.imagen != "" %} {{object.neuropsi.imagen}} {% else %} NO {% endif %}</td>
                    </tr>
                     <tr>
                        <th colspan="4">Resultados por Bloques</th>
                    </tr>
                    <tr>

                        <th style="vertical-align:middle;">
                            Orientación
                        </th>

                        <td style="vertical-align:middle;">
                            {{object.neuropsi.orientacion}}
                        </td>
                        <th style="vertical-align:middle;">
                            Atención y Concentración
                        </th>
                        <td style="vertical-align:middle;">
                            {{object.neuropsi.atencion}}
                        </td>
                    </tr>
                    <tr>
                      <th rowspan="2" style="vertical-align:middle;">Memoria</th>
                      <td>Codificación</td>
                      <td colspan="2">{{object.neuropsi.codificacion}}</td>
                    </tr>
                    <tr>
                      <td>Evocación</td>
                      <td colspan="2">{{object.neuropsi.evocacion}}</td>
                    </tr>
                    <tr>

                        <th style="vertical-align:middle;">
                            Lenguaje
                        </th>

                        <td style="vertical-align:middle;">
                            {{object.neuropsi.lenguaje}}
                        </td>

                        {% if object.ingreso.n_educativo == "Primaria" or object.ingreso.n_educativo == "Analfabeta" %}
                        <td colspan="2"></td>
                        {% else%}
                        <th style="vertical-align:middle;">
                            Lectura y Escritura
                        </th>
                        <td style="vertical-align:middle;">
                            {{object.neuropsi.lectura}}
                        </td>
                        {% endif %}
                    </tr>
                    <tr>
                      <th rowspan="2" style="vertical-align:middle;">Funciones Ejecutivas</th>
                      <td>Conceptual</td>
                      <td colspan="2">{{object.neuropsi.conceptual}}</td>
                    </tr>
                    <tr>
                      <td>Funciones Motoras</td>
                      <td colspan="2">{{object.neuropsi.motora}}</td>
                    </tr>

                    <tr>
                      <th>Resultado</th>
                      <td colspan="3">{{object.neuropsi.resultado}}</td>
                    </tr>


                    </tbody>
                </table>


            {% endif %}
            </form>
        {% endif %}



        {% endif %}
        </form>
    </div>
      <div class="tab-pane" id="lectura">
        <form>
        {% if not object.lectura_resonancia or object.lectura_resonancia.fracturas == None %}
          <p class="text-danger">No se encontro Lectura de Resonancia del Sujeto</p>
          {% if perms.paciente.add_lectura_resonancia and object.inscrito == True %}
          <button class="btn btn-primary" formaction="{% url 'crear_lectura' object.pk %}">Añadir</button>
          {% endif %}

        {% endif %}
        </form>




        {% if object.lectura_resonancia  and object.lectura_resonancia.fracturas != None %}
          <br>
        <ol>
              <li>
                  <label>Fracturas</label> &nbsp; {{object.lectura_resonancia.fracturas}}
                  {% if object.lectura_resonancia.fracturas == 'SI' %}
                  <div id="fracturas">
                    Localización:{{object.lectura_resonancia.fracturas_localizacion}}
                  </div>
                  {% endif%}
              </li>
              <li>
                  <label>Hemorragia subaracnoidea</label> &nbsp; {{object.lectura_resonancia.hemorragia_subaracnoidea}}
                  {% if object.lectura_resonancia.hemorragia_subaracnoidea == 'SI' %}
                      <ul>
                            <li>{{object.lectura_resonancia.hemorragia_subaracnoidea_mayor_menor}}</li>
                            {% if object.lectura_resonancia.hemorragia_subaracnoidea_sangrado == True %}
                            <li>Sangrado en capa de menor de 1 mm de espesor</li>
                            {% endif%}
                            {% if object.lectura_resonancia.hemorragia_subaracnoidea_coagulos == True %}
                            <li>Coágulos localizados mayores de 1 mm</li>
                            {% endif%}
                            {% if object.lectura_resonancia.hemorragia_subaracnoidea_hemorragia == True %}
                            <li>Hemorragia intraparenquimatosas o intraventicular</li>
                            {% endif%}
                            {% if object.lectura_resonancia.hemorragia_subaracnoidea_cronico == True %}
                            <li>Crónico</li>
                            {% endif%}
                        </ul>


                  {% endif%}
              </li>

              <li>
                  <label>Hematoma extra axial</label> &nbsp; {{object.lectura_resonancia.hematoma_extra}}

                  {% if object.lectura_resonancia.hematoma_extra == 'SI' %}
                      <ul>
                            <li>{{object.lectura_resonancia.hematoma_extra_sub_epi}}</li>
                            <li>Espesor: {{object.lectura_resonancia.hematoma_extra_espesor}} mm</li>
                            {% if object.lectura_resonancia.hematoma_extra_agudo == True %}
                            <li>Agudo</li>
                            {% endif %}
                        </ul>
                  {% endif%}


              </li>
            <li>
                  <label>Hematoma intra axial</label> &nbsp; {{object.lectura_resonancia.hematoma_intra}}
                {% if object.lectura_resonancia.hematoma_intra == 'SI' %}
                      <ul>
                            <li>{{object.lectura_resonancia.hematoma_intra_mayor_menor}}</li>
                            <li>Localización: {{object.lectura_resonancia.hematoma_intra_localizacion}}</li>
                            {% if object.lectura_resonancia.hematoma_extra_agudo == True %}
                            <li>Agudo</li>
                            {% endif %}
                        </ul>
                  {% endif%}

              </li>

              <li>
                  <label>Contusión</label> &nbsp; {{object.lectura_resonancia.contusion}}
                  {% if object.lectura_resonancia.contusion == 'SI' %}
                      <ul>
                            <li>{{object.lectura_resonancia.contusion_hemorragica}}</li>
                            <li>{{object.lectura_resonancia.contusion_cortical}}</li>
                            <li>Localización: {{object.lectura_resonancia.contusion_localizacion}}</li>
                            <li>Diámetro: {{object.lectura_resonancia.contusion_diametro}} mm</li>
                       </ul>
                  {% endif%}

              </li>
              <li>
                  <label>Línea media</label> &nbsp; {{object.lectura_resonancia.linea}}
                  {% if object.lectura_resonancia.linea == 'Desviación' %}
                      <ul>
                            <li>{{object.lectura_resonancia.linea_tipo}}</li>
                            <li>Lateralización: {{object.lectura_resonancia.linea_lateralizacion}}</li>
                       </ul>
                  {% endif%}

              </li>
              <li>
                  <label>Herniación</label> &nbsp; {{object.lectura_resonancia.herniacion}}
                  {% if object.lectura_resonancia.herniacion == 'SI' %}
                      <ul>
                            <li>{{object.lectura_resonancia.herniacion_tipo}}</li>
                       </ul>
                  {% endif%}
                </li>
              <li>
                  <label>Oclusión</label> &nbsp; {{object.lectura_resonancia.oclusion}}
                  {% if object.lectura_resonancia.oclusion == 'SI' %}
                      <ul>
                            <li>{{object.lectura_resonancia.oclusion_tipo}}</li>
                            <li>Localización: {{object.lectura_resonancia.oclusion_localizacion}}</li>

                       </ul>
                  {% endif%}

              </li>
              <li>
                  <label>Edema</label> &nbsp; {{object.lectura_resonancia.edema}}
                  {% if object.lectura_resonancia.oclusion == 'SI' %}
                      <ul>
                            <li>{{object.lectura_resonancia.edema_tipo}}</li>
                            <li>Localización: {{object.lectura_resonancia.edema_localizacion}}</li>

                       </ul>
                  {% endif%}

              </li>
                <li>
                  <label>Infarto o Isquemia</label> &nbsp; {{object.lectura_resonancia.infarto_isquemia}}
                    {% if object.lectura_resonancia.infarto_isquemia == 'SI' %}
                      <ul>
                            <li>Localización: {{object.lectura_resonancia.infarto_isquemia_localizacion}}</li>
                       </ul>
                  {% endif%}

              </li>

                <li>
                  <label>Lesión axonal difusa</label>
                    <ul>
                        {% if object.lectura_resonancia.lesion_subcortical == True %}
                        <li>Lesiones subcorticales difusas</li>
                        {% endif %}
                        {% if object.lectura_resonancia.lesion_calloso == True %}
                        <li>Lesión en el esplenio del cuerpo calloso</li>
                        {% endif %}
                        {% if object.lectura_resonancia.lsion_dorsolateral == True %}
                        <li>Lesión dorsolateral mesencefálica y/o puente alto</li>
                        {% endif %}
                    </ul>

              </li>

                <li>
                  <label>Ventriculomegalia</label> &nbsp; {{object.lectura_resonancia.ventriculomegalia}}
                    {% if object.lectura_resonancia.ventriculomegalia == 'SI' %}
                      <ul>
                            <li>Actividad Hidrocefalica {% if object.lectura_resonancia.vectriculomegalia_actividad == True %}
                                SI {% else %} NO {% endif %}</li>
                       </ul>
                  {% endif%}

              </li>

                <li>
                  <label>Lesiones asociadas</label>(quistes, masas, malformaciones vasculares, aneurisma, orbitas cavidades
paranasales). &nbsp; {{object.lectura_resonancia.lesiones_asociadas}}
                    {% if object.lectura_resonancia.lesiones_asociadas == 'SI' %}
                      <ul>
                            <li>Localización: {{object.lectura_resonancia.lesiones_asociadas_descripcion}}</li>
                       </ul>
                  {% endif%}

              </li>


                <li>
                  <label>Atrofia o encefalomalacia</label> &nbsp; {{object.lectura_resonancia.atrofia}}
                    {% if object.lectura_resonancia.atrofia == 'SI' %}
                      <ul>
                            <li>Descripción: {{object.lectura_resonancia.atrofia_descripcion}}</li>
                       </ul>
                  {% endif%}

              </li>

                <li>
                  <label>Cambios postquirúrgicos</label> &nbsp; {{object.lectura_resonancia.cambios}}
                    {% if object.lectura_resonancia.cambios == 'SI' %}
                      <ul>
                            <li>Localización: {{object.lectura_resonancia.cambios_localizacion}}</li>
                       </ul>
                  {% endif%}

              </li>
            </ol>
          <label>Impresión (orientación diagnóstica):</label>
          <br>
          {{object.lectura_resonancia.impresion}}

          {% if perms.paciente.change_lectura_resonancia and object.inscrito == True %}
        <form>
          <button class="btn btn-primary" formaction="{% url 'lectura_editar' object.lectura_resonancia.pk%}">Editar</button>
          </form>
          {% endif %}
        {% endif %}
      </div>


    </div>
  </div>
  <div class="tab-pane"  id="seguimientos" >

      {% if object.get_seguimiento|length == 0 or object.get_seguimiento.0.glasgowtotal == '0' %}
      <p class="text-danger">No Hay registros</p>
        {% if perms.paciente.add_seguimiento and object.uci.glasgowtotal_e == '0' and object.inscrito == True %}
          <form>
          <button class="btn btn-primary" formaction="{% url 'crear_seguimiento' object.pk %}">Añadir</button>
          </form>
          {% endif %}

      {% else %}

      <div class="container">
        <h4>Filtrar por fecha</h4>


  <form class="form-inline" action="">
    <div class="form-group">
      <label>Desde:</label>
      <input id="inicio" type="date" class="form-control"  min="{{object.get_seguimiento.0.fechaseguimiento|date:'Y-m-d'}}" value="{{object.get_seguimiento.0.fechaseguimiento|date:'Y-m-d'}}" max="{{object.get_seguimiento.last.fechaseguimiento|date:'Y-m-d'}}">
    </div>
    <div class="form-group">
      <label>Hasta:</label>
      <input id="fin" type="date" class="form-control"  min="{{object.get_seguimiento.0.fechaseguimiento|date:'Y-m-d'}}" value="{{object.get_seguimiento.last.fechaseguimiento|date:'Y-m-d'}}" max="{{object.get_seguimiento.last.fechaseguimiento|date:'Y-m-d'}}">
    </div>
  </form>



  <script type="text/javascript">

document.getElementById("inicio").addEventListener('change', validari);
document.getElementById("fin").addEventListener('change', validarf);

/* function */
function validari(){
    var minposible=document.getElementById("inicio").min;
    var maxposible=document.getElementById("inicio").max;
    var inicio=document.getElementById("inicio").value;
    var fin=document.getElementById("fin").value;
    if(inicio<minposible){
      document.getElementById("inicio").value=minposible;
    }
    if(inicio>maxposible){
      document.getElementById("inicio").value=maxposible;
    }
    if(inicio>fin){
      document.getElementById("fin").value=inicio;
    }
    document.getElementById("fin").min=inicio;
}
function validarf(){
    var minposible=document.getElementById("fin").min;
    var maxposible=document.getElementById("fin").max;
    var fin=document.getElementById("fin").value;
    if(fin<minposible){
      document.getElementById("fin").value=minposible;
    }
    if(fin>maxposible){
      document.getElementById("fin").value=maxposible;
    }
}
</script>
<br>

        {% for seguimiento in object.get_seguimiento %}
        <div class="container" id="a{{ forloop.counter }}"></div>
        {% if seguimiento.glasgowtotal != '0' %}

        <script type="text/javascript">
         document.getElementById("inicio").addEventListener('change', mostrar);
         document.getElementById("fin").addEventListener('change', mostrar);
         function mostrar() {
         var x="{{forloop.counter}}";
         var i=new Date(document.getElementById("inicio").value);
         var f=new Date(document.getElementById("fin").value);
         f.setDate(f.getDate()+1);
         var fa="{{seguimiento.fechaseguimiento|date:'Y'}}";
         var fm="{{seguimiento.fechaseguimiento|date:'m'}}";
         var fd="{{seguimiento.fechaseguimiento|date:'d'}}";
         var d = new Date(fa+","+fm+","+fd);

         if (d>i && d<f){
          document.getElementById("a"+x).style="display:inline";
          }
          else {
          document.getElementById("a"+x).style="display:none";
          }

          var HTMLContent =`
                <div class="panel-group">
                      <div class="panel panel-default">
                        <div class="panel-heading">
                          <h4 class="panel-title">
                            <a data-toggle="collapse" href="#collapse`+x+`">{{seguimiento.fechaseguimiento}}</a>
                          </h4>
                        </div>
                        <div id="collapse`+x+`" class="panel-collapse collapse">
			{% if perms.paciente.add_seguimiento %}

          <a type="button" class="btn btn-link" onclick="location.href = '{% url 'seguimiento_editar' seguimiento.pk %}'">Editar</a>
			{% endif%}
                        <table class="table table-hover">

                        <tbody>
                          <tr>
                          <th>Responsable</th>
                          <td colspan="3">{{seguimiento.medico_responsable}}</td>
                          </tr>

                          <tr>
                            <th style="vertical-align:middle;">Glasgow de seguimiento</th>
                            <td>
                              <p>Apertura ocular: {{ seguimiento.apertura_ocular }}</p>
                              <p>Respuesta motora: {{ seguimiento.respuesta_motora }}</p>
                              <p>Respuesta verbal: {{ seguimiento.respuesta_verbal }}</p>
                            </td>
                            <th style="vertical-align:middle;">Glasgow total </th>
                            <td style="vertical-align:middle;">{{ seguimiento.glasgowtotal }}</td>
                          </tr>
                          <tr>
                            <th>Falla orgánica</th>
                            <td>
                              {{seguimiento.fallaorganica}}{% if seguimiento.fallaorganica == 'SI'%}, {{seguimiento.fallaorganica_cual}} {% endif %}
                            </td>
                            <th>Nueva infección</th>
                            <td>
                              {{seguimiento.infeccion}}{% if seguimiento.infeccion == 'SI'%}, {{seguimiento.infeccion_foco}} {% endif %}
                            </td>
                          </tr>
                        <tr>
                            <th>Parada cardíaca</th>
                            <td>
                              {{seguimiento.parada}}{% if seguimiento.parada == 'SI'%}, {{seguimiento.parada_tiempo}} minutos {% endif %}
                            </td>
                            <th>Monitoría PIC</th>
                            <td>
                              {{seguimiento.pic}}{% if seguimiento.pic == 'SI'%}, {{seguimiento.pic_numero}} {% endif %}
                            </td>
                          </tr>
                          <tr>
                            <th>Ventilación mecánica</th>
                            <td>
                              {{seguimiento.ventilacion}}
                            </td>
                            <th>Soporte vasopresor</th>
                            <td>
                              {{seguimiento.soporte}}{% if seguimiento.soporte == 'SI'%}, {{seguimiento.soporte_cual}} {% endif %}
                            </td>
                          </tr>
                        <tr>
                            <th>Neuroimagen</th>
                            <td colspan="3">
                              {{seguimiento.neuroimagen}}
                              {% if seguimiento.neuroimagen == 'SI'%}
                              {{seguimiento.imgobservacion}}
                              {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <th>Neurología</th>
                            <td colspan="3">
                              {{seguimiento.neurologia}}
                            </td>
                          </tr>
                        </tbody>
                        </table>
                        <table class="table table-hover">
                          <tbody>
                          <tr>
                          <th>Medicamento </th>
                          <td>Midazolam</td>
                          <td>Dexmedeto</td>
                          <td>Fentanyl</td>
                          <td>Tiopental</td>
                          <td>Vecuronio</td>

                        </tr>
                        <tr>
                          <th>Dosis/dia </th>
                          <td>{{seguimiento.midazolam}}</td>
                          <td>{{seguimiento.dexmedeto}}</td>
                          <td>{{seguimiento.fentanyl}}</td>
                          <td>{{seguimiento.tiopental}}</td>
                          <td>{{seguimiento.vecuronio}}</td>

                        </tr>
                        </tbody>
                        </table>

                        {% if seguimiento.otro1_nombre != None and seguimiento.otro1_nombre != "" %}
                            <label>Medicamentos Adicionales</label>
                            <table class="table table-hover">
                            <tbody>

                            <tr>

                                <td>{{seguimiento.otro1_nombre}}</td>
                                <td>dosis/dia</td>
                                <td>{{seguimiento.otro1_dt}}</td>
                            </tr>
                        {% endif %}
                        {% if seguimiento.otro2_nombre != None and seguimiento.otro2_nombre != None %}
                            <tr >

                                <td>{{seguimiento.otro2_nombre}}</td>
                                <td>dosis/dia</td>
                                <td>{{seguimiento.otro2_dt}}</td>
                            </tr>
                        {% endif %}





                          </tbody>
                        </table>


                        </div>
                      </div>
                </div>
                `;



         document.getElementById("a"+x).innerHTML = (HTMLContent);

         }
          mostrar();
        </script>
        {%endif%}
    {% endfor %}



      {% endif %}

  {% if perms.paciente.add_seguimiento and object.get_seguimiento|length > 0 and object.get_seguimiento.0.glasgowtotal != '0' and object.uci.glasgowtotal_e == '0' and object.inscrito == True %}
          <br>
          <div class="container">
            <form>
          <button class="btn btn-primary" formaction="{% url 'crear_seguimiento' object.pk %}">Añadir Nuevo Seguimiento</button>
            </form>
          </div>
          {% endif %}

 </div>









</div>

</div>







<br>
<br>
{% endblock %}
