{% extends 'base/base.html' %}

{% block title %} Información {% endblock %}

{% block content %}

<h1>Información Clínica Sujeto # : {{ object.sujeto_numero }}</h1>

<ul class="nav nav-tabs">
  <li class="nav-item">
    <a class="nav-link active " data-toggle="tab" href="#home">Candidato</a>
  </li>
  <li class="nav-item">
    <a class="nav-link " {% if object.inscrito == True and object.estado > 0 %} data-toggle="tab" {% endif %} href="#estudio">Formato ingreso al estudio</a>
  </li>
  <li class="nav-item">
    <a class="nav-link " {% if object.inscrito == True and object.estado > 1 %} data-toggle="tab" {% endif %}  href="#radiologia">Traslado a Radiología</a>
  </li>
  <li class="nav-item">
    <a class="nav-link " {% if object.inscrito == True and object.estado > 2 %} data-toggle="tab" {% endif %}  href="#uci">Formato UCI</a>
  </li>
</ul>
<div id="myTabContent" class="tab-content" >
  <div class="tab-pane active"  id="home">
      {% ifequal object.estado  0 %}
      <p class="text-danger">No se encontro información del Sujeto</p>
      {% if user.groups.all.0.name != 'Consultor' %}
      <a class="btn btn-primary" href="{% url 'paciente_editar' object.pk%}">Editar</a>
      {% endif %}
      {% endifequal %}
      {% if object.estado  > 0 %}
      <table class="table table-hover">

          <tbody>
            <tr class="table-active">
              <th>Fecha Registro</th>
              <td>{{ object.fecha_de_registro }} </td>
              <th>HC del sujeto</th>
              <td>{{ object.HC }} </td>
            </tr>
            {% if user.groups.all.0.name == 'Administrador' %}
            <tr class="table-active">
              <th>Nombres</th>
              <td>{{ object.nombres }} </td>
              <th>Apellidos</th>
              <td>{{ object.apellidos }} </td>
            </tr>
            <tr class="table-active">
              <th>C.C</th>
              <td colspan="3">{{ object.cc }} </td>
            </tr>
            {% endif %}
            <tr class="table-active">
              <th>Edad Actual</th>
              <td>{{ object.edad }} </td>
              <th>Sexo</th>
              <td>{{ object.sexo }} </td>
            </tr>
            <tr>
              <th>Cama UCI</th>
              <td colspan="3">{{ object.cama_numero }} </td>
            </tr>
            <tr class="table-primary">
              <th>Fecha de Evento Principal </th>
              <td>{{ object.fecha_evento_principal }}</td>
              <th>Hora</th>
              <td>{{ object.hora_evento_principal }}</td>
            </tr>
            <tr class="table-secondary">
              <th>Fecha de ingreso UCI</th>
              <td>{{ object.fecha_ingreso }}</td>
              <th>Hora</th>
              <td>{{ object.hora_ingreso }}</td>
            </tr>
            <tr class="table-success">
              <th>Grupo Diagnóstico</th>
              <td colspan="3">{{ object.G_diagnostico }}</td>
            </tr>

            <tr class="table-success">
              <th>Diagnósticos neurologicos o <br>neuropsiquiátricos previos al evento</th>
              <td colspan="3">{% for diag in  object.D_neuro_logico_psiquiatrico_previo.all %}
                    <p>{{ diag }}</p>
                  {% endfor %}
              </td>
            </tr>
            {% if object.D_especificos != "" %}
            <tr class="table-danger">
              <th>Diagnóstico Específico</th>
              <td colspan="3">{{ object.D_especificos }}</td>
            </tr>
            {% endif %}
            <tr class="table-warning">
              <th >Criterios de inclusión</th>
              <td colspan="3">

                   {% if object.ci == 'ci1'%}
                    <p>Paciente con episodio de parada cadíaca con reanimación exitosa.</p>
                   {% elif object.ci == 'ci2'%}
                     <p>Paciente con Dx de lesión cerebral aguda de origen traumático o evento cerebrovascular.</p>
                   {% endif %}
                   {% if object.ci3 == True %}
                    <p>Puntaje en escala Glasgow igual o menor a 8 después del evento inicial.</p>
                   {% endif %}
                   {% if object.ci4 == True %}
                    <p>Paciente transportable a un resonador.</p>
                   {% endif %}
              </td>
            </tr>
            {% if object.inscrito == False %}
                <tr class="table-warning">
                  <th >Criterios de exclusión</th>
                  <td colspan="3">

                       {% if object.ce1 == True %}
                        <p>Diagnóstico de muerte cerebral en las primeras 48 horas del ingreso a UCI.</p>
                       {% endif %}
                       {% if object.ce2 == True %}
                        <p>Destruccion masiva del parénquima cerebral no rescatable por neurocirugía.</p>
                       {% endif %}
                       {% if object.ce3 == True %}
                        <p>Disfunción neurológica y/o neuropsiquiátrica previa.</p>
                       {% endif %}
                       {% if object.ce4 == True %}
                        <p>Decisión de la familia de no participar en estudios de investigación.</p>
                       {% endif %}
                  </td>
                </tr>
            {% endif %}
            <tr class="table-info">
              <th>Médico Responsable</th>
              <td>{{ object.medico_responsable }}</td>
              <th>Incluido en el estudio</th>
              <td>{% if object.inscrito == True %} Sí {% else %} No {% endif %}</td>
            </tr>
          </tbody>
        </table>
      {% if user.groups.all.0.name != 'Consultor' %}
      <a class="btn btn-primary" href="{% url 'paciente_editar' object.pk%}">Editar</a>
      {% endif %}
      {% endif %}
 </div>
  <div class="tab-pane" id="estudio">
    {% ifequal object.estado  1 %}
      <p class="text-danger">No se encontro información de Ingreso del Sujeto</p>
      {% if user.groups.all.0.name != 'Consultor' %}
      {% if object.ingreso %}
      <a class="btn btn-primary" href="{% url 'ingreso_editar' object.ingreso.pk %}">Añadir</a>
      {% else %}
      <a class="btn btn-primary" href="{% url 'crear_ingreso' object.pk%}">Añadir</a>
      {% endif %}
      {% endif %}
    {% endifequal %}
    {% if object.estado  > 1 %}
    <table class="table table-hover">

          <tbody>
            <tr class="table-active">
              <th>Fecha Ingreso</th>
              <td colspan="3">{{ object.ingreso.fecha_form }} </td>
            </tr>
            <tr class="table-active">
              <th>Lugar de Nacimiento</th>
              <td>{{ object.ingreso.lugar_nacimiento }} </td>
                <th>Lugar de Residencia</th>
              <td>{{ object.ingreso.lugar_residencia }} </td>
            </tr>
            {% if user.groups.all.0.name == 'Administrador' %}
            <tr class="table-active">
              <th>Dirección</th>
              <td>{{ object.ingreso.direccion }} </td>
              <th>Acompañante</th>
              <td>{{ object.ingreso.nombre_acompanante }} </td>
            </tr>
            <tr class="table-active">
              <th>Teléfono de contacto 1</th>
              <td>{{ object.ingreso.tel1 }} </td>
              <th>Teléfono de contacto 2</th>
              <td>{{ object.ingreso.tel2 }} </td>
            </tr>
            {% endif %}
            <tr class="table-active">
              <th>Peso</th>
              <td>{{ object.ingreso.peso }} Kg</td>
              <th>Altura</th>
              <td>{{ object.ingreso.estatura }} cms</td>
            </tr>
            <tr>
              <th>Nivel educativo</th>
              <td >{{ object.ingreso.n_educativo }} </td>
              <th>Lateralidad</th>
              <td >{{ object.ingreso.lateralidad }} </td>
            </tr>
            <tr class="table-primary">
              <th>Estado de conciencia </th>
              <td>{{ object.ingreso.conciencia }}</td>
              <th>Sedado por neuroprotección</th>
              <td>{% if object.ingreso.sedado == True %} Sí {% else %} No {% endif %}</td>
            </tr>

            <tr class="table-success">
              <th>Antecedentes Patológicos</th>
              <td >{% for p in  object.ingreso.a_patologicos.all %}
                    <p>{% if p.nombre == 'Otro' %}{{object.ingreso.a_patologicos_cual}}{% else %}{{ p }}{% endif%}</p>
                  {% endfor %}
              </td>
              <th>Antecedentes Familiares relevantes:</th>
              <td >{{ object.ingreso.a_familiares }}</td>
            </tr>
            <tr class="table-secondary">
              <th>Antecedentes quirúrgicos</th>
              <td>
                  {% if object.ingreso.quirurgicos == 'craneotomia' %}<p><b>Fecha:</b> {{ object.ingreso.fecha_craneotomia }}</p>{% endif %}
                  {% if object.ingreso.quirurgicos == 'otro' %}<p> {{ object.ingreso.causa_quirurgicos }}</p>{% endif %}
              </td>
              <th>Antecedentes Tóxico alérgicos:</th>
              <td>{{ object.ingreso.a_toxico_alergenicos }}</td>
            </tr>
            <tr class="table-success">
              <th rowspan="2">Antecedentes Farmacológicos:</th>
              <td >{{ object.ingreso.a_farmaco1 }}</td>
              <th>Dosis total/día</th>
              <td>{{ object.ingreso.a_farmaco1_dosis }}</td>
            </tr>
            <tr class="table-success">
              <td >{{ object.ingreso.a_farmaco2 }}</td>
              <th>Dosis total/día</th>
              <td>{{ object.ingreso.a_farmaco2_dosis }}</td>
            </tr>
            <tr class="table-success">
              {% if object.ingreso.firma_consentimiento == True %}
              <th>Firma de consentimiento informado</th>
              <td colspan="3">Sí</td>
              {% else %}
              <th>Firma de consentimiento informado</th>
              <td >No</td>
              <th>Causa</th>
              <td >{{ object.ingreso.firma_causa }}</td>
              {% endif %}
            </tr>
          </tbody>
        </table>
      {% if user.groups.all.0.name != 'Consultor' %}
      <a class="btn btn-primary" href="{% url 'ingreso_editar' object.ingreso.pk%}">Editar</a>
      {% endif %}
    {% endif %}
  </div>
   <div class="tab-pane" id="radiologia">
    {% ifequal object.estado  2 %}
      <p class="text-danger">No se encontro información de Traslado a Radiología del Sujeto</p>
      {% if user.groups.all.0.name != 'Consultor' %}
      {% if object.radiologia %}
      <a class="btn btn-primary" href="{% url 'radiologia_editar' object.radiologia.pk %}">Añadir</a>
      {% else %}
      <a class="btn btn-primary" href="{% url 'crear_radiologia' object.pk%}">Añadir</a>
      {% endif %}
      {% endif %}
    {% endifequal %}
    {% if object.estado  > 2 %}
    <table class="table table-hover">

          <tbody>
            <tr class="table-active">
              <th>Fecha de procedimiento</th>
              <td colspan="3">{{ object.radiologia.fecha_procedimiento }} </td>
            </tr>

            <tr>
              <th colspan="4" style="color:blue;">Pretransporte</th>
            </tr>

            <tr class="table-active">
              <th>Transportable</th>
              <td>{{ object.radiologia.transportable }} </td>
                <th>Hora inicio</th>
              <td>{{ object.radiologia.hora_inicio }} </td>
            </tr>
            <tr>
              <th>Personal de Acompañamiento</th>
              <td>
                {% if object.radiologia.jefe_enfermeria == 'SI' %}
                  Jefe de enfermería <br>
                {% endif %}
                {% if object.radiologia.aux_enfermeria == 'SI' %}
                  Auxiliar de enfermería <br>
                {% endif %}
                {% if object.radiologia.medico_uci == 'SI' %}
                  Médico UCI <br>
                {% endif %}
                {% if object.radiologia.anestesiologo == 'SI' %}
                  Anestesiólogo <br>
                {% endif %}
                {% if object.radiologia.terapeuta_respiratorio == 'SI' %}
                  Terapeuta Respiratorio <br>
                {% endif %}
              </td>
              <th>Soporte</th>
              <td>
                {% if object.radiologia.vmi == 'SI' %}
                  VMI <br>
                {% endif %}
                {% if object.radiologia.vasopresor == 'SI' %}
                  Vasopresor <br>
                {% endif %}
                {% if object.radiologia.ionotropico == 'SI' %}
                  Ionotrópico <br>
                {% endif %}
              </td>
            </tr>
            <tr>
              <th colspan="4" style="color:blue;">Monitoreo de transporte UCI - Radiología</th>
            </tr>
            <tr>
              <td></td><th>Signos vitales</th>
            </tr>
            {% if object.radiologia.ur_pulsoximetro == 'SI' %}
              <tr>
                <td>Pulsoxímetro</td>
                <td>{{object.radiologia.ur_pulsoximetro_sv}}</td>
              </tr>
            {% endif %}
            {% if object.radiologia.ur_frecuencia_cardiaca == 'SI' %}
              <tr>
                <td >Frecuencia cardíaca</td>
                <td >{{object.radiologia.ur_frecuencia_cardiaca_sv}}</td>
              </tr>
            {% endif %}
            {% if object.radiologia.ur_frecuencia_respiratoria == 'SI' %}
              <tr>
                <td >Frecuencia respiratoria</td>
                <td >{{object.radiologia.ur_frecuencia_respiratoria_sv}}</td>
              </tr>
            {% endif %}
            {% if object.radiologia.ur_visoscopio == 'SI' %}
              <tr>
                <td >Visoscopio</td>
                <td >{{object.radiologia.ur_visoscopio_sv}}</td>
              </tr>
            {% endif %}
            {% if object.radiologia.ur_tension == 'SI' %}
              <tr>
                <td >Tensión arterial</td>
                <td >{{object.radiologia.ur_tension_sv}}</td>
              </tr>
            {% endif %}
            <tr>
              <th colspan="4" style="color:blue;">Monitoreo neurológico</th>
            </tr>
            <tr>
              <th>#PIC</th><td>{{object.radiologia.pic}}</td>
              <th>#PPC</th><td>{{object.radiologia.ppc}}</td>
            </tr>
            {% if object.radiologia.medicamentos_emergencia == 'SI' %}
              <th>Medicamentos de emergencia</th>
              <td>{{object.radiologia.me_cual}}</td>
              <th>Dosis total</th>
              <td>{{object.radiologia.me_dosis}}</td>
            {% endif %}
            <tr>
              <th colspan="4" style="color:blue;">Monitoreo en resonancia</th>
            </tr>
            <tr>
              <td></td><th>Dosis total</th><th>Signos vitales</th>
            </tr>
            {% if object.radiologia.sedacion == 'SI' %}
              <tr>
                <td >Sedación</td>
                <td >{{object.radiologia.sedacion_dt}}</td>
                <td >{{object.radiologia.sedacion_sv}}</td>
              </tr>
            {% endif %}
            {% if object.radiologia.analgesia == 'SI' %}
              <tr>
                <td >Analgesia</td>
                <td >{{object.radiologia.analgesia_dt}}</td>
                <td >{{object.radiologia.analgesia_sv}}</td>
              </tr>
            {% endif %}
            {% if object.radiologia.relajacion == 'SI' %}
              <tr>
                <td >Relajación</td>
                <td >{{object.radiologia.relajacion_dt}}</td>
                <td >{{object.radiologia.relajacion_sv}}</td>
              </tr>
            {% endif %}
            {% if object.radiologia.otra_medicacion == 'SI' %}
              <th>Otra medicación administrada durante el procedimiento</th>
              <td>{{object.radiologia.otra_medicacion_cual}}</td>
              <th>Dosis total</th>
              <td>{{object.radiologia.otra_medicacion_dt}}</td>
            {% endif %}

            <tr>
              <th colspan="4" style="color:blue;">Monitoreo de transporte Radiología - UCI</th>
            </tr>
            <tr>
              <td></td><th>Signos vitales</th>
            </tr>
            {% if object.radiologia.ru_pulsoximetro == 'SI' %}
              <tr>
                <td>Pulsoxímetro</td>
                <td>{{object.radiologia.ru_pulsoximetro_sv}}</td>
              </tr>
            {% endif %}
            {% if object.radiologia.ru_frecuencia_cardiaca == 'SI' %}
              <tr>
                <td >Frecuencia cardíaca</td>
                <td >{{object.radiologia.ru_frecuencia_cardiaca_sv}}</td>
              </tr>
            {% endif %}
            {% if object.radiologia.ru_frecuencia_respiratoria == 'SI' %}
              <tr>
                <td >Frecuencia respiratoria</td>
                <td >{{object.radiologia.ru_frecuencia_respiratoria_sv}}</td>
              </tr>
            {% endif %}
            {% if object.radiologia.ru_visoscopio == 'SI' %}
              <tr>
                <td >Visoscopio</td>
                <td >{{object.radiologia.ru_visoscopio_sv}}</td>
              </tr>
            {% endif %}
            {% if object.radiologia.ru_tension == 'SI' %}
              <tr>
                <td >Tensión arterial</td>
                <td >{{object.radiologia.ru_tension_sv}}</td>
              </tr>
            {% endif %}

          <tr>
            <th>Tiempo de resonancia</th>
            <td>{{object.radiologia.tiempo_sesonacia}}</td>
            <th>Hora de llegada a UCI</th>
            <td>{{object.radiologia.hora_llegada}}</td>
          </tr>
          {% if object.radiologia.complicaciones == 'SI'%}
          <tr>
            <th >Complicaciones derivadas del transporte</th>
            <td colspan="3">{{object.radiologia.complicaciones_cuales}}</td>
          </tr>

          {% endif %}

          </tbody>
        </table>
     {% if user.groups.all.0.name != 'Consultor' %}
      <a class="btn btn-primary" href="{% url 'radiologia_editar' object.radiologia.pk%}">Editar</a>
     {% endif %}
    {% endif %}
  </div>
<div class="tab-pane"  id="uci">
      {% ifequal object.estado  3 %}
      <p class="text-danger">No se encontro información formato UCI del Sujeto</p>
      {% if user.groups.all.0.name != 'Consultor' %}
      {% if object.uci %}
      <a class="btn btn-primary" href="{% url 'uci_editar' object.uci.pk %}">Añadir</a>
      {% else %}
      <a class="btn btn-primary" href="{% url 'crear_uci' object.pk%}">Añadir</a>
      {% endif %}
      {% endif %}
      {% endifequal %}
      {% if object.estado  > 3 %}
      <table class="table table-hover">

          <tbody>
            <tr class="table-active">
              <th>Fecha </th>
              <td>{{ object.uci.fechauci }} </td>
              <th>Hora</th>
              <td>{{ object.uci.horauci }} </td>
            </tr>
          </tbody>
        </table>
      {% if user.groups.all.0.name != 'Consultor' %}
      <a class="btn btn-primary" href="{% url 'uci_editar' object.uci.pk%}">Editar</a>
      {% endif %}
      {% endif %}
 </div>
</div>
<br>
<br>
{% endblock %}
