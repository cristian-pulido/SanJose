{% extends 'base/base.html' %}

{% block title %} Formulario Paciente {% endblock %}
{% block content %}
{% if user.groups.all.0.name == 'Consultor' %}
<script type="text/javascript">
        window.location="{% url 'upload-new' %}";
</script>
{% endif %}

<form method="post">
    {% csrf_token %}

    <div class="row">


        <div class="col-md-8 col-md-offset-2">
                {% if form.errors %}
                    <!-- Error messaging -->
                    <div id="errors">
                        <div class="inner">
                            <p>There were some errors in the information you entered. Please correct the following:</p>
                            {{ form.non_field_errors }}
                            <ul>
                                {% for field in form %}
                                    {% if field.errors %}<li>{{ field.label }}: {{ field.errors|striptags }}</li>{% endif %}
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                    <!-- /Error messaging -->
                {% endif %}
        </div>



        <div class="col-md-8 col-md-offset-2">
                <h1>Formulario UCI Sujeto#{{ object.candidato.sujeto_numero }}</h1>
                <h3>Seguimiento Unidad de Cuidados intensivos (>48hrs post ingreso)</h3>
        </div>
        <div class="col-md-8 col-md-offset-2">
            <table class="table table-hover">
              <tbody>
                <tr class="table-active">
                  <th style="vertical-align:middle;">{{form.fechauci.label}}</th>
                    <td style="vertical-align:middle;">
                        {{ form.fechauci.errors }}
                        <input class="form-control" name="fechauci" type="text" placeholder="Fecha " id="datepicker"  value="{{object.fechauci|date:'d/m/Y'}}">
                    </td>
                    <th style="vertical-align:middle;">{{form.horauci.label}}</th>
                    <td style="vertical-align:middle;">
                        {{ form.horauci.errors }}{{ form.horauci }}
                    </td>
                </tr>
                <tr>
                    <th colspan="2">Glasgow de seguimiento</th>
                    <th colspan="2">{{form.glasgowtotal.label}}</th>
                </tr>
                <tr>
                    <td>{{form.apertura_ocular.label}}</td>
                    <td>
                        <div class="btn-group btn-group-toggle" data-toggle="buttons" id="id_apertura_ocular" >
                          {% for o in "1234"|make_list %}
                            <label onclick="sumar({{o}},'ocular')" {% if object.apertura_ocular == o %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_apertura_ocular_{{o}}">
                            <input type="radio" name="apertura_ocular" value="{{o}}"  required id="id_apertura_ocular_{{o}}"  {% if object.apertura_ocular == o %} checked="" {% endif %} />{{o}}
                          </label>
                          {% endfor %}
                          {{forms.apertura_ocular.errors}}
                        </div>
                    </td>
                    <td colspan="2" colrow="3" style="vertical-align:middle;">
                    <input type="text" readonly name="glasgowtotal" placeholder="" required class="form-control" maxlength="5" id="id_glasgowtotal" value="{{object.glasgowtotal}}"/>
                    </td>
                </tr>
                <tr>
                    <td>{{form.respuesta_motora.label}}</td>
                    <td>
                        <div class="btn-group btn-group-toggle" data-toggle="buttons" id="id_respuesta_motora" >
                          {% for o in "123456"|make_list %}
                            <label onclick="sumar({{o}},'motora')" {% if object.respuesta_motora == o %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_respuesta_motora_{{o}}">
                            <input type="radio" name="respuesta_motora" value="{{o}}"  required id="id_respuesta_motora_{{o}}"  {% if object.respuesta_motora == o %} checked="" {% endif %} />{{o}}
                          </label>
                          {% endfor %}
                          {{forms.respuesta_motora.errors}}
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>{{form.respuesta_verbal.label}}</td>
                    <td>
                        <div class="btn-group btn-group-toggle" data-toggle="buttons" id="id_respuesta_verbal" >
                          {% for o in "12345"|make_list %}
                            <label onclick="sumar({{o}},'verbal')" {% if object.respuesta_verbal == o %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_respuesta_verbal_{{o}}">
                            <input type="radio" name="respuesta_verbal" value="{{o}}"  required id="id_respuesta_verbal_{{o}}"  {% if object.respuesta_verbal == o %} checked="" {% endif %} />{{o}}
                          </label>
                          {% endfor %}
                          {{forms.respuesta_verbal.errors}}
                        </div>
                    </td>
                </tr>
                <tr>
                    <th style="vertical-align:middle;">{{form.fallaorganica.label}}</th>
                    <td style="vertical-align:middle;">
                        <div class="btn-group btn-group-toggle" data-toggle="buttons" id="id_fallaorganica" >
                            <label onclick="falla('SI')" {% if object.fallaorganica  == 'SI' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_fallaorganica_1">
                                <input type="radio" name="fallaorganica" value="SI"  required id="id_fallaorganica_1"  {% if object.fallaorganica == 'SI' %} checked="" {% endif %} />SI
                            </label>
                            <label onclick="falla('NO')" {% if object.fallaorganica  == 'NO' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_fallaorganica_2">
                                <input type="radio" name="fallaorganica" value="NO"  required id="id_fallaorganica_2"  {% if object.fallaorganica == 'NO' %} checked="" {% endif %} />NO
                            </label>
                          {{forms.fallaorganica.errors}}
                        </div>
                    </td>
                    <th style="vertical-align:middle;"><label {% if object.fallaorganica == 'SI'%} style="visibility:inline" {% else %} style="visibility:hidden" {% endif %}  id="falla">{{form.fallaorganica_cual.label}}</label></th>
                    <td style="vertical-align:middle;"><input {% if object.fallaorganica == 'SI'%} type="text" {% else %} type="hidden" {% endif %} name="fallaorganica_cual" placeholder="" required class="form-control" maxlength="25" id="id_fallaorganica_cual" value="{{object.fallaorganica_cual}}"/></td>
                </tr>
              <tr>
                  <th style="vertical-align:middle;">{{form.sepsis.label}}</th>
                  <td style="vertical-align:middle;">
                      <div class="btn-group btn-group-toggle" data-toggle="buttons" id="id_sepsis" >
                            <label  {% if object.sepsis  == 'SI' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_sepsis_1">
                                <input type="radio" name="sepsis" value="SI"  required id="id_sepsis_1"  {% if object.sepsis == 'SI' %} checked="" {% endif %} />SI
                            </label>
                            <label  {% if object.sepsis  == 'NO' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_sepsis_2">
                                <input type="radio" name="sepsis" value="NO"  required id="id_sepsis_2"  {% if object.sepsis == 'NO' %} checked="" {% endif %} />NO
                            </label>
                          {{forms.sepsis.errors}}
                        </div>
                  </td>
                  <th style="vertical-align:middle;">{{form.presion_intracraneana.label}}</th>
                  <td style="vertical-align:middle;">
                      <div class="btn-group btn-group-toggle" data-toggle="buttons" id="id_presion_intracraneana" >
                            <label  {% if object.presion_intracraneana  == 'SI' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_presion_intracraneana_1">
                                <input type="radio" name="presion_intracraneana" value="SI"  required id="id_presion_intracraneana_1"  {% if object.presion_intracraneana == 'SI' %} checked="" {% endif %} />SI
                            </label>
                            <label  {% if object.presion_intracraneana  == 'NO' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_presion_intracraneana_2">
                                <input type="radio" name="presion_intracraneana" value="NO"  required id="id_presion_intracraneana_2"  {% if object.presion_intracraneana == 'NO' %} checked="" {% endif %} />NO
                            </label>
                          {{forms.presion_intracraneana.errors}}
                        </div>
                  </td>
              </tr>
              <tr>
                  <th style="vertical-align:middle;">{{form.monitoria_pic.label}}</th>
                  <td style="vertical-align:middle;">
                      <div class="btn-group btn-group-toggle" data-toggle="buttons" id="id_monitoria_pic" >
                            <label  {% if object.monitoria_pic  == 'SI' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_monitoria_pic_1">
                                <input type="radio" name="monitoria_pic" value="SI"  required id="id_monitoria_pic_1"  {% if object.monitoria_pic == 'SI' %} checked="" {% endif %} />SI
                            </label>
                            <label  {% if object.monitoria_pic  == 'NO' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_monitoria_pic_2">
                                <input type="radio" name="monitoria_pic" value="NO"  required id="id_monitoria_pic_2"  {% if object.monitoria_pic == 'NO' %} checked="" {% endif %} />NO
                            </label>
                          {{forms.monitoria_pic.errors}}
                        </div>
                  </td>
                  <th style="vertical-align:middle;">{{form.ventilacionmecanica.label}}</th>
                  <td style="vertical-align:middle;">
                      <div class="btn-group btn-group-toggle" data-toggle="buttons" id="id_ventilacionmecanica" >
                            <label  {% if object.ventilacionmecanica  == 'SI' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_ventilacionmecanica_1">
                                <input type="radio" name="ventilacionmecanica" value="SI"  required id="id_ventilacionmecanica_1"  {% if object.ventilacionmecanica == 'SI' %} checked="" {% endif %} />SI
                            </label>
                            <label  {% if object.ventilacionmecanica  == 'NO' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_ventilacionmecanica_2">
                                <input type="radio" name="ventilacionmecanica" value="NO"  required id="id_ventilacionmecanica_2"  {% if object.ventilacionmecanica == 'NO' %} checked="" {% endif %} />NO
                            </label>
                          {{forms.ventilacionmecanica.errors}}
                        </div>
                  </td>
              </tr>
              <tr>
                  <th style="vertical-align:middle;">{{form.soportevasopresor.label}}</th>
                  <td style="vertical-align:middle;">
                      <div class="btn-group btn-group-toggle" data-toggle="buttons" id="id_soportevasopresor" >
                            <label  onclick="soporte('SI')" {% if object.soportevasopresor  == 'SI' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_soportevasopresor_1">
                                <input type="radio" name="soportevasopresor" value="SI"  required id="id_soportevasopresor_1"  {% if object.soportevasopresor == 'SI' %} checked="" {% endif %} />SI
                            </label>
                            <label  onclick="soporte('NO')" {% if object.soportevasopresor  == 'NO' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_soportevasopresor_2">
                                <input type="radio" name="soportevasopresor" value="NO"  required id="id_soportevasopresor_2"  {% if object.soportevasopresor == 'NO' %} checked="" {% endif %} />NO
                            </label>
                          {{forms.soportevasopresor.errors}}
                        </div>
                  </td>




                  <th colspan="2" style="vertical-align:middle;">
                      <table>
                          <tbody>
                          <tr>
                              <th style="vertical-align:middle;"><label {% if object.soportevasopresor == 'SI' %} style="visibility:inline" {% else %} style="visibility:hidden" {% endif %}  id="vaso1">{{form.noradrenalina.label}}</label></th>
                              <td style="vertical-align:middle;">
                                  <div class="btn-group btn-group-toggle" data-toggle="buttons" id="id_noradrenalina" >
                                    <label  {% if object.soportevasopresor == 'SI'%} style="visibility:inline" {% else %} style="visibility:hidden" {% endif %}  id="vaso1si" {% if object.noradrenalina  == 'SI' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} >
                                        <input {% if object.soportevasopresor == 'SI'%} type="radio" {% else %} type="hidden" {% endif %} name="noradrenalina" value="SI"  required id="id_noradrenalina_1"  {% if object.noradrenalina == 'SI' %} checked="" {% endif %} />SI
                                    </label>
                                    <label  {% if object.soportevasopresor == 'SI'%} style="visibility:inline" {% else %} style="visibility:hidden" {% endif %}  id="vaso1no"
                                            {% if object.noradrenalina  == 'NO' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_noradrenalina_2">
                                        <input {% if object.soportevasopresor == 'SI'%} type="radio" {% else %} type="hidden" {% endif %}  name="noradrenalina" value="NO"  required id="id_noradrenalina_2"  {% if object.noradrenalina == 'NO' %} checked="" {% endif %} />NO
                                    </label>
                                  {{forms.noradrenalina.errors}}
                                </div>

                              </td>
                          </tr>
                          <tr>
                              <th style="vertical-align:middle;"><label {% if object.soportevasopresor == 'SI'%} style="visibility:inline" {% else %} style="visibility:hidden" {% endif %}  id="vaso2">{{form.vasopresina.label}}</label></th>
                              <td style="vertical-align:middle;">
                                  <div class="btn-group btn-group-toggle" data-toggle="buttons" id="id_vasopresina" >
                                    <label  {% if object.soportevasopresor == 'SI'%} style="visibility:inline" {% else %} style="visibility:hidden" {% endif %}  id="vaso2si"
                                            {% if object.vasopresina  == 'SI' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_vasopresina_1">
                                        <input{% if object.soportevasopresor == 'SI'%} type="radio" {% else %} type="hidden" {% endif %} name="vasopresina" value="SI"  required id="id_vasopresina_1"  {% if object.vasopresina == 'SI' %} checked="" {% endif %} />SI
                                    </label>
                                    <label  {% if object.soportevasopresor == 'SI'%} style="visibility:inline" {% else %} style="visibility:hidden" {% endif %}  id="vaso2no"
                                            {% if object.vasopresina  == 'NO' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_vasopresina_2">
                                        <input {% if object.soportevasopresor == 'SI'%} type="radio" {% else %} type="hidden" {% endif %}  name="vasopresina" value="NO"  required id="id_vasopresina_2"  {% if object.vasopresina == 'NO' %} checked="" {% endif %} />NO
                                    </label>
                                  {{forms.vasopresina.errors}}
                                </div>

                              </td>
                          </tr>
                          <tr>
                              <th style="vertical-align:middle;"><label {% if object.soportevasopresor == 'SI'%} style="visibility:inline" {% else %} style="visibility:hidden" {% endif %}  id="vaso3">{{form.adrenalina.label}}</label></th>
                              <td style="vertical-align:middle;">
                                  <div class="btn-group btn-group-toggle" data-toggle="buttons" id="id_adrenalina" >
                                    <label  {% if object.soportevasopresor == 'SI'%} style="visibility:inline" {% else %} style="visibility:hidden" {% endif %}  id="vaso3si"
                                            {% if object.adrenalina  == 'SI' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_adrenalina_1">
                                        <input {% if object.soportevasopresor == 'SI'%} type="radio" {% else %} type="hidden" {% endif %} name="adrenalina" value="SI"  required id="id_adrenalina_1"  {% if object.adrenalina == 'SI' %} checked="" {% endif %} />SI
                                    </label>
                                    <label  {% if object.soportevasopresor == 'SI'%} style="visibility:inline" {% else %} style="visibility:hidden" {% endif %}  id="vaso3no"
                                            {% if object.adrenalina  == 'NO' %} class="btn btn-success active" {% else %} class="btn btn-success" {% endif %} for="id_adrenalina_2">
                                        <input {% if object.soportevasopresor == 'SI'%} type="radio" {% else %} type="hidden" {% endif %}  name="adrenalina" value="NO"  required id="id_adrenalina_2"  {% if object.adrenalina == 'NO' %} checked="" {% endif %} />NO
                                    </label>
                                  {{forms.adrenalina.errors}}
                                </div>

                              </td>
                          </tr>
                          </tbody>
                      </table>
                  </th>

              </tr>
              </tbody>
            </table>



        </div>


    <div class="col-md-8 col-md-offset-2">
        <button class="btn btn-primary" type="submit">Guardar</button>
    </div>

    </div>
</form>
<br>
<br>
{% endblock %}
{% block extrajs %}
<script>
function sumar(a,b) {
    var ao1 =document.getElementById("id_apertura_ocular_1").checked ;
    var ao2 =document.getElementById("id_apertura_ocular_2").checked ;
    var ao3 =document.getElementById("id_apertura_ocular_3").checked ;
    var ao4 =document.getElementById("id_apertura_ocular_4").checked ;
    var rm1 =document.getElementById("id_respuesta_motora_1").checked ;
    var rm2 =document.getElementById("id_respuesta_motora_2").checked ;
    var rm3 =document.getElementById("id_respuesta_motora_3").checked ;
    var rm4 =document.getElementById("id_respuesta_motora_4").checked ;
    var rm5 =document.getElementById("id_respuesta_motora_5").checked ;
    var rm6 =document.getElementById("id_respuesta_motora_6").checked ;
    var rv1 =document.getElementById("id_respuesta_verbal_1").checked ;
    var rv2 =document.getElementById("id_respuesta_verbal_2").checked ;
    var rv3 =document.getElementById("id_respuesta_verbal_3").checked ;
    var rv4 =document.getElementById("id_respuesta_verbal_4").checked ;
    var rv5 =document.getElementById("id_respuesta_verbal_5").checked ;
    var total=0;
    if (b == 'ocular') {
    total = total+a+rm1*1+rm2*2+rm3*3+rm4*4+rm5*5+rm6*6+rv1*1+rv2*2+rv3*3+rv4*4+rv5*5;
    }
    if (b == 'motora') {
    total = total+a+ao1*1+ao2*2+ao3*3+ao4*4+rv1*1+rv2*2+rv3*3+rv4*4+rv5*5;
    }
    if (b == 'verbal') {
    total = total+a+ao1*1+ao2*2+ao3*3+ao4*4+rm1*1+rm2*2+rm3*3+rm4*4+rm5*5+rm6*6;
    }

    document.getElementById("id_glasgowtotal").value = total;
}
</script>
<script>
function falla(a) {
    var x=document.getElementById("id_fallaorganica_cual");
    var y=document.getElementById("falla");
    if (a == 'SI') {
        x.class='form-control';
        x.type='text';
        y.style="visibility:inline";
    }
    if (a == 'NO') {
        x.class='form-control';
        x.type='hidden';
        y.style="visibility:hidden";
        x.value="";
    }
}
</script>
<script>
function soporte(a) {
    var al1=document.getElementById("vaso1");
    var al2=document.getElementById("vaso1si");
    var al3=document.getElementById("vaso1no");
    var ai1=document.getElementById("id_noradrenalina_1");
    var ai2=document.getElementById("id_noradrenalina_2");

    var bl1=document.getElementById("vaso2");
    var bl2=document.getElementById("vaso2si");
    var bl3=document.getElementById("vaso2no");
    var bi1=document.getElementById("id_vasopresina_1");
    var bi2=document.getElementById("id_vasopresina_2");

    var cl1=document.getElementById("vaso3");
    var cl2=document.getElementById("vaso3si");
    var cl3=document.getElementById("vaso3no");
    var ci1=document.getElementById("id_adrenalina_1");
    var ci2=document.getElementById("id_adrenalina_2");


    if (a == 'SI') {
        al1.style="visibility:inline";
        al2.style="visibility:inline";
        al3.style="visibility:inline";
        ai1.type="radio";
        ai2.type="radio";
        bl1.style="visibility:inline";
        bl2.style="visibility:inline";
        bl3.style="visibility:inline";
        bi1.type="radio";
        bi2.type="radio";
        cl1.style="visibility:inline";
        cl2.style="visibility:inline";
        cl3.style="visibility:inline";
        ci1.type="radio";
        ci2.type="radio";

    }
    if (a == 'NO') {
        al1.style="visibility:hidden";
        al2.style="visibility:hidden";
        al3.style="visibility:hidden";
        ai1.type="hidden";
        ai2.type="hidden";
        bl1.style="visibility:hidden";
        bl2.style="visibility:hidden";
        bl3.style="visibility:hidden";
        bi1.type="hidden";
        bi2.type="hidden";
        cl1.style="visibility:hidden";
        cl2.style="visibility:hidden";
        cl3.style="visibility:hidden";
        ci1.type="hidden";
        ci2.type="hidden";

    }

}
</script>
{% endblock %}